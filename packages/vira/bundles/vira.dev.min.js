var vira;
/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./src/components/helmet.ts":
/*!**********************************!*\
  !*** ./src/components/helmet.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.Helmet = void 0;
const core_1 = __webpack_require__(/*! ../core */ "./src/core/index.ts");
class Helmet extends core_1.Component {
    static SSR(body) {
        const reg = /(<helmet\b[^>]*>)((.|\n)*?)(<\/helmet>)/gm;
        const head = [];
        const footer = [];
        if (document === null || document === void 0 ? void 0 : document.head) {
            let children = document.head.children;
            for (let i = 0; i < children.length; i++) {
                if (head.indexOf(children[i]) === -1) {
                    head.push(children[i]);
                }
            }
        }
        let result;
        while ((result = reg.exec(body)) != null) {
            const first = result[1];
            const second = result[2];
            const toHead = first.includes('data-placement="head"');
            if (toHead && !head.includes(second))
                head.push(second);
            else if (!footer.includes(second))
                footer.push(second);
        }
        const cleanBody = body.replace(reg, "");
        return {
            body: cleanBody,
            head,
            footer,
        };
    }
    mount() {
        var _a, _b, _c, _d;
        for (const element of this.props.children) {
            const parent = this.props.footer ? document.body : document.head;
            const tag = element.tagName;
            let attrs = [];
            attrs.push(element.innerText);
            for (let i = 0; i < element.attributes.length; i++) {
                attrs.push((_a = element.attributes.item(i)) === null || _a === void 0 ? void 0 : _a.name.toLowerCase());
                attrs.push((_b = element.attributes.item(i)) === null || _b === void 0 ? void 0 : _b.value.toLowerCase());
            }
            if (tag === "HTML" || tag === "BODY") {
                const htmlTag = document.getElementsByTagName(tag)[0];
                for (let i = 1; i < element.attributes.length; i += 2) {
                    htmlTag.setAttribute(attrs[i], attrs[i + 1]);
                }
                return;
            }
            else if (tag === "TITLE") {
                const titleTag = document.getElementsByTagName(tag);
                if (titleTag.length) {
                    titleTag[0].text = element.text;
                }
                else {
                    const titleTag = (0, core_1.h)("title", null, element.innerHTML);
                    parent.appendChild(titleTag);
                }
                return;
            }
            let exists = false;
            attrs = attrs.sort();
            const el = document.getElementsByTagName(tag);
            for (let i = 0; i < el.length; i++) {
                let attrs2 = [];
                attrs2.push(el[i].innerText);
                for (let j = 0; j < el[i].attributes.length; j++) {
                    attrs2.push((_c = el[i].attributes.item(j)) === null || _c === void 0 ? void 0 : _c.name.toLowerCase());
                    attrs2.push((_d = el[i].attributes.item(j)) === null || _d === void 0 ? void 0 : _d.value.toLowerCase());
                }
                attrs2 = attrs2.sort();
                if (attrs.length > 0 &&
                    attrs2.length > 0 &&
                    JSON.stringify(attrs) === JSON.stringify(attrs2))
                    exists = true;
            }
            if (!exists) {
                (0, core_1.appendChildren)(parent, element);
            }
        }
    }
    render() {
        if (isSSR) {
            return (0, core_1.h)("helmet", {
                "data-ssr": true,
                "data-placement": this.props.footer ? "footer" : "head",
            }, this.props.children);
        }
        else {
            return [];
        }
    }
}
exports.Helmet = Helmet;


/***/ }),

/***/ "./src/components/img.ts":
/*!*******************************!*\
  !*** ./src/components/img.ts ***!
  \*******************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __rest = (this && this.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.Img = void 0;
const core_1 = __webpack_require__(/*! ../core */ "./src/core/index.ts");
const utils_1 = __webpack_require__(/*! ../utils */ "./src/utils.ts");
class Img extends core_1.Component {
    constructor(props) {
        super(props);
        const { key, src } = this.props;
        this.id = (0, utils_1.strToHash)(src) + "-" + (0, utils_1.strToHash)(JSON.stringify(this.props));
        if (key) {
            this.id += `$key-${key}`;
        }
        if (!this.state) {
            this.setState({ image: "", isLoaded: false });
        }
    }
    mount() {
        const _a = this.props, { lazy = true, placeholder, key, ref, children } = _a, rest = __rest(_a, ["lazy", "placeholder", "key", "ref", "children"]);
        if (!lazy)
            return;
        const observer = new IntersectionObserver((entries, observer) => {
            for (const entry of entries) {
                if (entry.isIntersecting) {
                    observer.disconnect();
                    this.state.image = (0, core_1.h)("img", Object.assign({}, rest));
                    if (this.state.image.complete) {
                        this.state.isLoaded = true;
                        this.update();
                    }
                    else {
                        this.state.image.onload = () => {
                            this.state.isLoaded = true;
                            this.update();
                        };
                    }
                }
            }
        }, { threshold: [0, 1] });
        observer.observe(this.elements[0]);
    }
    render() {
        const _a = this.props, { lazy = true, src, placeholder, key, ref, children } = _a, rest = __rest(_a, ["lazy", "src", "placeholder", "key", "ref", "children"]);
        if (!lazy) {
            this.state.image = (0, core_1.h)("img", Object.assign({ src }, rest));
            return this.state.image;
        }
        if (this.state.isLoaded) {
            return this.state.image;
        }
        else if (typeof placeholder === "string") {
            return (0, core_1.h)("img", Object.assign({ src: placeholder }, rest));
        }
        else if (typeof placeholder === "function") {
            return placeholder();
        }
        else {
            const style = {
                backgroundColor: "lightgray",
                width: "100px",
                height: "100px",
            };
            const { width, height } = rest, others = __rest(rest, ["width", "height"]);
            if (width) {
                style.width = width;
            }
            if (height) {
                style.height = height;
            }
            return (0, core_1.h)("div", Object.assign({ style }, others));
        }
    }
}
exports.Img = Img;


/***/ }),

/***/ "./src/components/index.ts":
/*!*********************************!*\
  !*** ./src/components/index.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ViraLink = exports.Switch = exports.Route = exports.Visible = exports.Suspense = exports.Link = exports.Img = exports.Helmet = void 0;
var helmet_1 = __webpack_require__(/*! ./helmet */ "./src/components/helmet.ts");
Object.defineProperty(exports, "Helmet", ({ enumerable: true, get: function () { return helmet_1.Helmet; } }));
var img_1 = __webpack_require__(/*! ./img */ "./src/components/img.ts");
Object.defineProperty(exports, "Img", ({ enumerable: true, get: function () { return img_1.Img; } }));
var link_1 = __webpack_require__(/*! ./link */ "./src/components/link.ts");
Object.defineProperty(exports, "Link", ({ enumerable: true, get: function () { return link_1.Link; } }));
var suspense_1 = __webpack_require__(/*! ./suspense */ "./src/components/suspense.ts");
Object.defineProperty(exports, "Suspense", ({ enumerable: true, get: function () { return suspense_1.Suspense; } }));
var visible_1 = __webpack_require__(/*! ./visible */ "./src/components/visible.ts");
Object.defineProperty(exports, "Visible", ({ enumerable: true, get: function () { return visible_1.Visible; } }));
var router_1 = __webpack_require__(/*! ./router */ "./src/components/router.ts");
Object.defineProperty(exports, "Route", ({ enumerable: true, get: function () { return router_1.Route; } }));
Object.defineProperty(exports, "Switch", ({ enumerable: true, get: function () { return router_1.Switch; } }));
Object.defineProperty(exports, "ViraLink", ({ enumerable: true, get: function () { return router_1.Link; } }));


/***/ }),

/***/ "./src/components/link.ts":
/*!********************************!*\
  !*** ./src/components/link.ts ***!
  \********************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __rest = (this && this.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.Link = void 0;
const core_1 = __webpack_require__(/*! ../core */ "./src/core/index.ts");
const helmet_1 = __webpack_require__(/*! ./helmet */ "./src/components/helmet.ts");
class Link extends core_1.Component {
    mount() {
        const { prefetch, href, delay, back = false } = this.props;
        if (back) {
            this.elements[0].addEventListener("click", function onClick(e) {
                e.preventDefault();
                const target = e.target;
                if (target.href === document.referrer) {
                    window.history.back();
                }
                else {
                    window.location.href = href;
                }
            }.bind(this));
        }
        if (delay) {
            this.elements[0].addEventListener("click", function onClick(e) {
                e.preventDefault();
                setTimeout(() => {
                    window.location.href = href;
                }, delay);
            }.bind(this));
        }
        if (prefetch) {
            if (prefetch === "hover") {
                this.prefetchOnHover();
            }
            else if (prefetch === "visible") {
                this.prefetchOnVisible();
            }
            else {
                this.addPrefetch();
            }
        }
    }
    prefetchOnHover() {
        this.elements[0].addEventListener("mouseover", function onHover() {
            this.addPrefetch();
        }.bind(this), { once: true });
    }
    prefetchOnVisible() {
        const observer = new IntersectionObserver((entries, observer) => {
            for (const entry of entries) {
                if (entry.isIntersecting) {
                    observer.disconnect();
                    this.addPrefetch();
                }
            }
        }, { threshold: [0, 1] });
        observer.observe(this.elements[0]);
    }
    addPrefetch() {
        let exists = false;
        const links = document.getElementsByTagName("link");
        for (const link of links) {
            if (link.getAttribute("rel") === "prefetch" &&
                link.getAttribute("href") === this.props.href) {
                exists = true;
            }
        }
        if (!exists) {
            const prefetch = (0, core_1.h)("link", {
                rel: "prefetch",
                href: this.props.href,
                as: "document",
            });
            document.head.appendChild(prefetch);
        }
    }
    render() {
        const _a = this.props, { children, prefetch, delay, back = false, ref } = _a, rest = __rest(_a, ["children", "prefetch", "delay", "back", "ref"]);
        const a = (0, core_1.h)("a", Object.assign({}, rest), ...children);
        if (prefetch && isSSR) {
            const link = (0, core_1.h)("link", {
                rel: "prefetch",
                href: this.props.href,
                as: "document",
            });
            const helmet = (0, core_1.h)(helmet_1.Helmet, null, link);
            return (0, core_1.h)(core_1.Fragment, null, [helmet, a]);
        }
        else {
            return a;
        }
    }
}
exports.Link = Link;


/***/ }),

/***/ "./src/components/router.ts":
/*!**********************************!*\
  !*** ./src/components/router.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.Link = exports.to = exports.Route = exports.Switch = void 0;
const core_1 = __webpack_require__(/*! ../core */ "./src/core/index.ts");
const instances = [];
function register(comp) {
    instances.push(comp);
}
function unregister(comp) {
    instances.splice(instances.indexOf(comp), 1);
}
function historyPush(path) {
    window.history.pushState({}, "", path);
    for (const instance of instances) {
        instance.forceUpdate();
    }
}
function historyReplace(path) {
    window.history.replaceState({}, "", path);
    for (const instance of instances) {
        instance.forceUpdate();
    }
}
function matchPath(pathname, options) {
    const { exact = false, regex } = options;
    let { path } = options;
    if (!path) {
        return {
            path: null,
            url: pathname,
            isExact: true,
        };
    }
    let match;
    let params = {};
    // path with params
    if (path.includes("/:")) {
        const pathArr = path.split("/");
        const pathnameArr = pathname.split("/");
        pathArr.forEach((p, i) => {
            if (/^:/.test(p)) {
                const key = p.slice(1);
                const value = pathnameArr[i];
                // if a regex is provided, check it it matches
                if (regex && regex[key]) {
                    const regexMatch = regex[key].test(value);
                    if (!regexMatch)
                        return null;
                }
                params = Object.assign(Object.assign({}, params), { [key]: value });
                pathArr[i] = pathnameArr[i];
            }
        });
        path = pathArr.join("/");
    }
    // catch all
    if (path === "*")
        match = [pathname];
    // regular path
    if (!match)
        match = new RegExp(`^${path}`).exec(pathname);
    if (!match)
        return null;
    const url = match[0];
    const isExact = pathname === url;
    if (exact && !isExact)
        return null;
    return {
        path,
        url,
        isExact,
        params,
    };
}
class Switch extends core_1.Component {
    constructor() {
        super(...arguments);
        this.index = 0;
        this.path = "";
        this.match = { index: -1, path: "" };
    }
    mount() {
        window.addEventListener("popstate", this.forceUpdate.bind(this));
        register(this);
    }
    destroy() {
        unregister(this);
        window.removeEventListener("popstate", this.forceUpdate.bind(this));
    }
    forceUpdate() {
        this.findChild();
        if (this.shouldUpdate())
            this.update();
    }
    findChild() {
        this.match = { index: -1, path: "" };
        for (const [i, child] of this.props.children.entries()) {
            const { path, exact, regex } = child.props;
            const match = matchPath(typeof isSSR !== "undefined"
                ? _nano.location.pathname
                : window.location.pathname, {
                path,
                exact,
                regex,
            });
            if (match) {
                this.match.index = i;
                this.match.path = path;
                return;
            }
        }
    }
    shouldUpdate() {
        return this.path !== this.match.path || this.index !== this.match.index;
    }
    render() {
        this.findChild();
        const child = this.props.children[this.match.index];
        if (this.match.index === -1) {
            this.path = "";
            this.index = 0;
        }
        if (child) {
            const { path } = child.props;
            this.path = path;
            this.index = this.match.index;
            const el = (0, core_1.renderElement)(child);
            return (0, core_1.renderElement)(el);
        }
        else if (this.props.fallback) {
            return (0, core_1.renderElement)(this.props.fallback);
        }
        else {
            return (0, core_1.h)("div", { class: "route" }, "not found");
        }
    }
}
exports.Switch = Switch;
function Route({ path, regex, children, }) {
    for (const child of children) {
        if (child.props)
            child.props = Object.assign(Object.assign({}, child.props), { route: { path, regex } });
    }
    return children;
}
exports.Route = Route;
const to = (to, replace = false) => {
    replace ? historyReplace(to) : historyPush(to);
};
exports.to = to;
function Link({ to, replace, children, }) {
    function onClick(event) {
        event.preventDefault();
        replace ? historyReplace(to) : historyPush(to);
    }
    return (0, core_1.h)("a", { href: to, onClick }, children);
}
exports.Link = Link;


/***/ }),

/***/ "./src/components/suspense.ts":
/*!************************************!*\
  !*** ./src/components/suspense.ts ***!
  \************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __rest = (this && this.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.Suspense = void 0;
const core_1 = __webpack_require__(/*! ../core */ "./src/core/index.ts");
const utils_1 = __webpack_require__(/*! ../utils */ "./src/utils.ts");
class Suspense extends core_1.Component {
    constructor(props) {
        super(props);
        this.isReady = false;
        const _a = this.props, { fallback, cache = false, children } = _a, rest = __rest(_a, ["fallback", "cache", "children"]);
        this.id = (0, utils_1.strToHash)(JSON.stringify(rest, function (_key, val) {
            return typeof val === "function" ? `${val}` : val;
        }));
    }
    mount() {
        return __awaiter(this, void 0, void 0, function* () {
            const _a = this.props, { fallback, cache = false, children } = _a, rest = __rest(_a, ["fallback", "cache", "children"]);
            if (cache)
                this.initialState = {};
            if (this.loadFromCache(cache))
                return;
            const promises = Object.values(rest).map((p) => p());
            const resolved = yield Promise.all(promises);
            const data = this.prepareData(rest, resolved, cache);
            this.addDataToChildren(data);
            this.isReady = true;
            this.update();
        });
    }
    loadFromCache(cache) {
        const cached = this.state && cache && Object.keys(this.state).length;
        if (cache) {
            this.addDataToChildren(this.state);
            this.isReady = true;
        }
        return cached;
    }
    ssr() {
        const _a = this.props, { fallback, cache = false, children } = _a, rest = __rest(_a, ["fallback", "cache", "children"]);
        const funcs = Object.values(rest).map((p) => p());
        const data = this.prepareData(rest, funcs, false);
        this.addDataToChildren(data);
    }
    addDataToChildren(data) {
        for (const child of this.props.children) {
            if (child.props) {
                child.props = Object.assign(Object.assign({}, child.props), data);
            }
        }
    }
    prepareData(rest, func, cache) {
        const data = Object.keys(rest).reduce((acc, item, index) => {
            if (cache) {
                this.state = Object.assign(Object.assign({}, this.state), { [item]: func[index] });
            }
            return Object.assign(Object.assign({}, acc), { [item]: func[index] });
        }, {});
        return data;
    }
    render() {
        if (typeof isSSR === "undefined") {
            const { cache = false } = this.props;
            this.loadFromCache(cache);
            return this.isReady ? this.props.children : this.props.fallback;
        }
        else {
            this.ssr();
            return this.props.children;
        }
    }
}
exports.Suspense = Suspense;


/***/ }),

/***/ "./src/components/visible.ts":
/*!***********************************!*\
  !*** ./src/components/visible.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.Visible = void 0;
const core_1 = __webpack_require__(/*! ../core */ "./src/core/index.ts");
class Visible extends core_1.Component {
    constructor() {
        super(...arguments);
        this.isVisible = false;
    }
    mount() {
        const observer = new IntersectionObserver((entries, observer) => {
            for (const entry of entries) {
                if (entry.isIntersecting) {
                    observer.disconnect();
                    this.isVisible = true;
                    this.update();
                }
            }
        }, { threshold: [0, 1] });
        observer.observe(this.elements[0]);
    }
    render() {
        if (this.isVisible) {
            if (this.props.onVisible) {
                this.props.onVisible();
            }
            return (0, core_1.render)(this.props.component || this.props.children[0]);
        }
        else {
            return (0, core_1.h)("div", { "data-visible": false, visibility: "hidden" });
        }
    }
}
exports.Visible = Visible;


/***/ }),

/***/ "./src/core/appendChildren.ts":
/*!************************************!*\
  !*** ./src/core/appendChildren.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.appendChildren = void 0;
const _1 = __webpack_require__(/*! . */ "./src/core/index.ts");
function appendChildren(element, children) {
    if (!Array.isArray(children)) {
        appendChildren(element, [children]);
        return;
    }
    if (typeof children === "object") {
        children = Array.from(children);
    }
    for (const child of children) {
        if (Array.isArray(child)) {
            appendChildren(element, child);
        }
        else {
            let comp = (0, _1.renderElement)(child);
            if (comp) {
                if (Array.isArray(comp)) {
                    appendChildren(element, comp);
                }
                else {
                    element.appendChild(!(comp === null || comp === void 0 ? void 0 : comp.nodeType) ? document.createTextNode("" + comp) : comp);
                }
            }
        }
    }
}
exports.appendChildren = appendChildren;


/***/ }),

/***/ "./src/core/component.ts":
/*!*******************************!*\
  !*** ./src/core/component.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.Component = void 0;
const utils_1 = __webpack_require__(/*! ../utils */ "./src/utils.ts");
const _1 = __webpack_require__(/*! . */ "./src/core/index.ts");
class Component {
    constructor(props) {
        this.props = props;
        this._elements = [];
        this.id = this._getHash();
    }
    render(_update) { }
    mount() { }
    beforeMount() { }
    destroy() { }
    _getHash() { }
    setState(state, shouldUpdate = false) {
        if (state && typeof state === "object") {
            this.state = Object.assign(Object.assign({}, this.state), state);
        }
        else
            this.state = state;
        if (shouldUpdate)
            this.update();
    }
    get state() {
        return _1._state.get(this.id);
    }
    set state(value) {
        _1._state.set(this.id, value);
    }
    set initialState(state) {
        if (!this.state)
            this.state = state;
    }
    get elements() {
        return this._elements;
    }
    set elements(elements) {
        if (!Array.isArray(elements)) {
            elements = [elements];
        }
        for (const el of elements) {
            this._elements.push(el);
        }
    }
    addNodeRemoveListener() {
        if (/^[^{]+{\s+}$/gm.test(this.destroy.toString()))
            return;
        (0, utils_1.onNodeRemove)(this.elements[0], () => {
            if (!this._skipUnmout) {
                this.destroy();
            }
        });
    }
    //@ts-ignore
    _mount() {
        this.addNodeRemoveListener();
        this.mount();
    }
    _destory() {
        if (this._hasUnmounted)
            return;
        this.destroy();
        this._hasUnmounted = true;
    }
    update(update) {
        this._skipUnmout = true;
        const oldElements = [...this.elements];
        this._elements = [];
        let el = this.render(update);
        el = (0, _1.renderElement)(el);
        this.elements = el;
        const parent = oldElements[0].parentElement;
        if (!parent)
            console.warn("Component needs a parent element to get updated!");
        for (const child of this.elements) {
            parent.insertBefore(child, oldElements[0]);
        }
        for (let child of oldElements) {
            child.remove();
            //@ts-ignore
            child = null;
        }
        this.addNodeRemoveListener();
        //@ts-ignore
        (0, utils_1.nextTick)(() => {
            this._skipUnmout = false;
            if (!this.elements[0].isConnected) {
                this._destory();
            }
        });
    }
}
exports.Component = Component;


/***/ }),

/***/ "./src/core/context.ts":
/*!*****************************!*\
  !*** ./src/core/context.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, exports) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.createContext = void 0;
function createContext(ctx) {
    let _ctx = ctx;
    return {
        Provider(props) {
            if (props.value) {
                _ctx = props.value;
                return props.children;
            }
        },
        Consumer(props) {
            return {
                component: props.children[0](_ctx),
                props: Object.assign(Object.assign({}, props), { context: _ctx }),
            };
        },
        get() {
            return _ctx;
        },
        set(ctx) {
            _ctx = ctx;
        },
    };
}
exports.createContext = createContext;


/***/ }),

/***/ "./src/core/fragment.ts":
/*!******************************!*\
  !*** ./src/core/fragment.ts ***!
  \******************************/
/***/ ((__unused_webpack_module, exports) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.Fragment = void 0;
const Fragment = (props) => {
    return props.children;
};
exports.Fragment = Fragment;


/***/ }),

/***/ "./src/core/h.ts":
/*!***********************!*\
  !*** ./src/core/h.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.h = void 0;
const utils_1 = __webpack_require__(/*! ../utils */ "./src/utils.ts");
const _1 = __webpack_require__(/*! . */ "./src/core/index.ts");
function h(comp, props, ...children) {
    if (typeof comp !== "string") {
        return { component: comp, props: Object.assign(Object.assign({}, props), { children: children }) };
    }
    let ref;
    const element = comp === "svg"
        ? (0, _1.hNS)("svg")
        : document.createElement(comp);
    for (const p in props) {
        if (p === "style" && typeof props[p] === "object") {
            const styles = Object.keys(props[p])
                .map((k) => `${k}:${props[p][k]}`)
                .join(";")
                .replace(/[A-Z]/g, (match) => `-${match.toLowerCase()}`);
            props[p] = styles + ";";
        }
        if (p === "ref") {
            ref = props[p];
        }
        if ((0, utils_1.isEvent)(element, p.toLowerCase())) {
            element.addEventListener(p.toLowerCase().substring(2), (e) => props[p](e));
        }
        else {
            element.setAttribute(p, props[p]);
        }
    }
    (0, _1.appendChildren)(element, children);
    if (ref) {
        ref(element);
    }
    // @ts-ignore
    if (element.ssr)
        return element.ssr;
    return element;
}
exports.h = h;


/***/ }),

/***/ "./src/core/hydrate.ts":
/*!*****************************!*\
  !*** ./src/core/hydrate.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.hydrate = void 0;
const _1 = __webpack_require__(/*! . */ "./src/core/index.ts");
function hydrate(component, parent = null, removeChildNodes = true) {
    return (0, _1.render)(component, parent, removeChildNodes);
}
exports.hydrate = hydrate;


/***/ }),

/***/ "./src/core/index.ts":
/*!***************************!*\
  !*** ./src/core/index.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.Store = exports.withStyles = exports.lazyHydration = exports._clearState = exports._state = exports.createContext = exports.Fragment = exports.Component = exports.hydrate = exports.hNS = exports.renderElement = exports.render = exports.h = exports.appendChildren = void 0;
var appendChildren_1 = __webpack_require__(/*! ./appendChildren */ "./src/core/appendChildren.ts");
Object.defineProperty(exports, "appendChildren", ({ enumerable: true, get: function () { return appendChildren_1.appendChildren; } }));
var h_1 = __webpack_require__(/*! ./h */ "./src/core/h.ts");
Object.defineProperty(exports, "h", ({ enumerable: true, get: function () { return h_1.h; } }));
var render_1 = __webpack_require__(/*! ./render */ "./src/core/render.ts");
Object.defineProperty(exports, "render", ({ enumerable: true, get: function () { return render_1.render; } }));
var renderElement_1 = __webpack_require__(/*! ./renderElement */ "./src/core/renderElement.ts");
Object.defineProperty(exports, "renderElement", ({ enumerable: true, get: function () { return renderElement_1.renderElement; } }));
Object.defineProperty(exports, "hNS", ({ enumerable: true, get: function () { return renderElement_1.hNS; } }));
var hydrate_1 = __webpack_require__(/*! ./hydrate */ "./src/core/hydrate.ts");
Object.defineProperty(exports, "hydrate", ({ enumerable: true, get: function () { return hydrate_1.hydrate; } }));
var component_1 = __webpack_require__(/*! ./component */ "./src/core/component.ts");
Object.defineProperty(exports, "Component", ({ enumerable: true, get: function () { return component_1.Component; } }));
var fragment_1 = __webpack_require__(/*! ./fragment */ "./src/core/fragment.ts");
Object.defineProperty(exports, "Fragment", ({ enumerable: true, get: function () { return fragment_1.Fragment; } }));
var context_1 = __webpack_require__(/*! ./context */ "./src/core/context.ts");
Object.defineProperty(exports, "createContext", ({ enumerable: true, get: function () { return context_1.createContext; } }));
var state_1 = __webpack_require__(/*! ./state */ "./src/core/state.ts");
Object.defineProperty(exports, "_state", ({ enumerable: true, get: function () { return state_1._state; } }));
Object.defineProperty(exports, "_clearState", ({ enumerable: true, get: function () { return state_1._clearState; } }));
var lazyHydration_1 = __webpack_require__(/*! ./lazyHydration */ "./src/core/lazyHydration.ts");
Object.defineProperty(exports, "lazyHydration", ({ enumerable: true, get: function () { return lazyHydration_1.lazyHydration; } }));
var withStyles_1 = __webpack_require__(/*! ./withStyles */ "./src/core/withStyles.ts");
Object.defineProperty(exports, "withStyles", ({ enumerable: true, get: function () { return withStyles_1.withStyles; } }));
var store_1 = __webpack_require__(/*! ./store */ "./src/core/store.ts");
Object.defineProperty(exports, "Store", ({ enumerable: true, get: function () { return store_1.Store; } }));


/***/ }),

/***/ "./src/core/lazyHydration.ts":
/*!***********************************!*\
  !*** ./src/core/lazyHydration.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.lazyHydration = void 0;
const components_1 = __webpack_require__(/*! ../components */ "./src/components/index.ts");
const _1 = __webpack_require__(/*! . */ "./src/core/index.ts");
function lazyHydration(component, parent, removeChildNodes = true) {
    const cmp = (0, _1.h)(components_1.Visible, null, component);
    return (0, _1.hydrate)(cmp, parent, removeChildNodes);
}
exports.lazyHydration = lazyHydration;


/***/ }),

/***/ "./src/core/render.ts":
/*!****************************!*\
  !*** ./src/core/render.ts ***!
  \****************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.removeAllChildNodes = exports.render = void 0;
const _1 = __webpack_require__(/*! . */ "./src/core/index.ts");
function render(cmp, parent = null, removeChildNodes = true) {
    let el = (0, _1.renderElement)(cmp);
    if (Array.isArray(el)) {
        el = el.map((c) => (0, _1.renderElement)(c));
        if (el.length === 1) {
            el = el[0];
        }
    }
    if (parent) {
        if (removeChildNodes) {
            removeAllChildNodes(parent);
        }
        if (el && parent.id && parent.id === el.id && parent.parentElement) {
            parent.parentElement.replaceChild(el, parent);
        }
        else {
            if (Array.isArray(el)) {
                el.map((c) => (0, _1.appendChildren)(parent, (0, _1.renderElement)(c)));
            }
            else {
                (0, _1.appendChildren)(parent, (0, _1.renderElement)(el));
            }
        }
        if (parent.ssr)
            return parent.ssr;
        return parent;
    }
    else {
        if (typeof isSSR === "boolean" && isSSR && !Array.isArray(el))
            return [el];
        return el;
    }
}
exports.render = render;
function removeAllChildNodes(el) {
    while (el.firstChild) {
        el.removeChild(el.firstChild);
    }
}
exports.removeAllChildNodes = removeAllChildNodes;


/***/ }),

/***/ "./src/core/renderElement.ts":
/*!***********************************!*\
  !*** ./src/core/renderElement.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.hNS = exports.renderElement = void 0;
const utils_1 = __webpack_require__(/*! ../utils */ "./src/utils.ts");
function renderElement(cmp) {
    var _a;
    if (["undefined" || 0].includes(typeof cmp)) {
        return [];
    }
    if (cmp == null) {
        return [];
    }
    if (typeof cmp === "string") {
        return cmp;
    }
    if (typeof cmp === "number") {
        return "" + cmp;
    }
    if ((cmp === null || cmp === void 0 ? void 0 : cmp.tagName) && cmp.tagName.toLowerCase() === "svg") {
        return SVG({ children: [cmp] });
    }
    if (cmp === null || cmp === void 0 ? void 0 : cmp.tagName) {
        return cmp;
    }
    if (cmp &&
        cmp.component &&
        cmp.component.prototype &&
        cmp.component.prototype.constructor &&
        /^class\s/.test(Function.prototype.toString.call(cmp.component))) {
        return renderClassComponent(cmp);
    }
    if (cmp.component && typeof cmp.component === "function") {
        return renderFunctionalComponent(cmp);
    }
    if (Array.isArray(cmp)) {
        return cmp.map((c) => renderElement(c)).flat();
    }
    if (typeof cmp === "function")
        return renderElement(cmp());
    if (((_a = cmp === null || cmp === void 0 ? void 0 : cmp.component) === null || _a === void 0 ? void 0 : _a.tagName) && typeof cmp.component.tagName === "string")
        return renderElement(cmp.component);
    if (Array.isArray(cmp.component))
        return renderElement(cmp.component);
    if (cmp.component)
        return renderElement(cmp.component);
}
exports.renderElement = renderElement;
function renderFunctionalComponent(cmp) {
    const { component, props } = cmp;
    const el = component(props);
    return renderElement(el);
}
function renderClassComponent(cmp) {
    const { component, props } = cmp;
    const hash = (0, utils_1.strToHash)(component.toString());
    component.prototype._getHash = () => hash;
    const Component = new component(props);
    Component.beforeMount();
    let el = Component.render();
    el = renderElement(el);
    Component.elements = el;
    if (props === null || props === void 0 ? void 0 : props.ref)
        props.ref(Component);
    if (typeof isSSR === "undefined") {
        //@ts-ignore
        (0, utils_1.nextTick)(() => {
            Component._mount();
        });
    }
    return el;
}
function hNS(tag) {
    return document.createElementNS("http://www.w3.org/2000/svg", tag);
}
exports.hNS = hNS;
function SVG(props) {
    const child = props.children[0];
    const attrs = child.attributes;
    const svg = hNS("svg");
    for (const attr of attrs) {
        svg.setAttribute(attr.name, attr.value);
    }
    svg.innerHTML = child.innerHTML;
    return svg;
}


/***/ }),

/***/ "./src/core/state.ts":
/*!***************************!*\
  !*** ./src/core/state.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, exports) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports._clearState = exports._state = void 0;
exports._state = new Map();
function _clearState() {
    exports._state.clear();
}
exports._clearState = _clearState;


/***/ }),

/***/ "./src/core/store.ts":
/*!***************************!*\
  !*** ./src/core/store.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, exports) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.Store = void 0;
class Store {
    constructor(defaultState, name = "", storage = "memory") {
        this._listeners = new Map();
        if (isSSR) {
            storage = "memory";
        }
        this._id = name;
        this._storage = storage;
        this._state = this._prevState = defaultState;
        if (!this._storage || this._storage === "memory") {
            return;
        }
        const Storage = storage === "local" ? localStorage : sessionStorage;
        const item = Storage.getItem(this._id);
        if (item) {
            this._state = this._prevState = JSON.parse(item);
        }
        else {
            Storage.setItem(this._id, JSON.stringify(defaultState));
        }
    }
    persist(state) {
        if (this._storage === "memory") {
            return;
        }
        const Storage = this._storage === "local" ? localStorage : sessionStorage;
        Storage.setItem(this._id, JSON.stringify(state));
    }
    clear() {
        this._state = this._prevState = undefined;
        const Storage = this._storage === "local" ? localStorage : sessionStorage;
        Storage.removeItem(this._id);
    }
    set state(state) {
        this._prevState = this._state;
        this._state = state;
        this.persist(state);
        this._listeners.forEach((func) => {
            func(this._state, this._prevState);
        });
    }
    get state() {
        return this._state;
    }
    setState(state) {
        this.state = state;
    }
    use() {
        const id = Math.random().toString(36).substr(2, 9);
        const _this = this;
        return {
            get state() {
                return _this.state;
            },
            setState(state) {
                _this.setState(state);
            },
            subscribe(func) {
                _this._listeners.set(id, func);
            },
            cancel() {
                _this._listeners.delete(id);
            },
        };
    }
}
exports.Store = Store;


/***/ }),

/***/ "./src/core/withStyles.ts":
/*!********************************!*\
  !*** ./src/core/withStyles.ts ***!
  \********************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __rest = (this && this.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.withStyles = void 0;
const components_1 = __webpack_require__(/*! ../components */ "./src/components/index.ts");
const _1 = __webpack_require__(/*! . */ "./src/core/index.ts");
function withStyles(styles) {
    return function (WrappedComponent) {
        return class extends _1.Component {
            render() {
                const _a = this.props, { children } = _a, rest = __rest(_a, ["children"]);
                const helmet = (0, _1.h)(components_1.Helmet, null, (0, _1.h)("style", null, styles.toString()));
                const component = children.length
                    ? (0, _1.h)(WrappedComponent, Object.assign({}, rest), children)
                    : (0, _1.h)(WrappedComponent, Object.assign({}, this.props));
                return (0, _1.h)(_1.Fragment, null, helmet, component);
            }
        };
    };
}
exports.withStyles = withStyles;


/***/ }),

/***/ "./src/index.ts":
/*!**********************!*\
  !*** ./src/index.ts ***!
  \**********************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.Visible = exports.Helmet = exports.Img = exports.ViraLink = exports.Route = exports.Switch = exports.Link = exports.Suspense = exports.Store = exports.lazyHydration = exports.createContext = exports.withStyles = exports.Component = exports.Fragment = exports.hydrate = exports.render = exports.h = exports.renderToString = exports.nextTick = void 0;
var utils_1 = __webpack_require__(/*! ./utils */ "./src/utils.ts");
Object.defineProperty(exports, "nextTick", ({ enumerable: true, get: function () { return utils_1.nextTick; } }));
var ssr_1 = __webpack_require__(/*! ./ssr */ "./src/ssr/index.ts");
Object.defineProperty(exports, "renderToString", ({ enumerable: true, get: function () { return ssr_1.renderToString; } }));
var core_1 = __webpack_require__(/*! ./core */ "./src/core/index.ts");
Object.defineProperty(exports, "h", ({ enumerable: true, get: function () { return core_1.h; } }));
Object.defineProperty(exports, "render", ({ enumerable: true, get: function () { return core_1.render; } }));
Object.defineProperty(exports, "hydrate", ({ enumerable: true, get: function () { return core_1.hydrate; } }));
Object.defineProperty(exports, "Fragment", ({ enumerable: true, get: function () { return core_1.Fragment; } }));
Object.defineProperty(exports, "Component", ({ enumerable: true, get: function () { return core_1.Component; } }));
Object.defineProperty(exports, "withStyles", ({ enumerable: true, get: function () { return core_1.withStyles; } }));
Object.defineProperty(exports, "createContext", ({ enumerable: true, get: function () { return core_1.createContext; } }));
Object.defineProperty(exports, "lazyHydration", ({ enumerable: true, get: function () { return core_1.lazyHydration; } }));
Object.defineProperty(exports, "Store", ({ enumerable: true, get: function () { return core_1.Store; } }));
var components_1 = __webpack_require__(/*! ./components */ "./src/components/index.ts");
Object.defineProperty(exports, "Suspense", ({ enumerable: true, get: function () { return components_1.Suspense; } }));
Object.defineProperty(exports, "Link", ({ enumerable: true, get: function () { return components_1.Link; } }));
Object.defineProperty(exports, "Switch", ({ enumerable: true, get: function () { return components_1.Switch; } }));
Object.defineProperty(exports, "Route", ({ enumerable: true, get: function () { return components_1.Route; } }));
Object.defineProperty(exports, "ViraLink", ({ enumerable: true, get: function () { return components_1.ViraLink; } }));
Object.defineProperty(exports, "Img", ({ enumerable: true, get: function () { return components_1.Img; } }));
Object.defineProperty(exports, "Helmet", ({ enumerable: true, get: function () { return components_1.Helmet; } }));
Object.defineProperty(exports, "Visible", ({ enumerable: true, get: function () { return components_1.Visible; } }));
const core_2 = __webpack_require__(/*! ./core */ "./src/core/index.ts");
const ssr_2 = __webpack_require__(/*! ./ssr */ "./src/ssr/index.ts");
exports["default"] = {
    render: core_2.render,
    hydrate: core_2.hydrate,
    h: core_2.h,
    lazyHydration: core_2.lazyHydration,
    renderToString: ssr_2.renderToString,
    Fragment: core_2.Fragment,
};


/***/ }),

/***/ "./src/ssr/document.ts":
/*!*****************************!*\
  !*** ./src/ssr/document.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.DocumentSSR = void 0;
const _1 = __webpack_require__(/*! . */ "./src/ssr/index.ts");
class DocumentSSR {
    constructor() {
        this.body = this.createElement("body");
        this.head = this.createElement("head");
    }
    createElement(tag) {
        return new _1.HTMLElementSSR(tag);
    }
    createElementNS(_URI, tag) {
        return new _1.HTMLElementSSR(tag);
    }
    createTextNode(text) {
        return text;
    }
    querySelector(_query) {
        return undefined;
    }
}
exports.DocumentSSR = DocumentSSR;


/***/ }),

/***/ "./src/ssr/elements.ts":
/*!*****************************!*\
  !*** ./src/ssr/elements.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, exports) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.HTMLElementSSR = void 0;
class HTMLElementSSR {
    constructor(tag) {
        this.tagName = tag;
        const selfClosing = [
            "area",
            "base",
            "br",
            "col",
            "embed",
            "hr",
            "img",
            "input",
            "link",
            "meta",
            "param",
            "source",
            "track",
            "wbr",
        ];
        if (selfClosing.indexOf(tag) >= 0) {
            this.ssr = `<${tag} />`;
            this.selfClosing = true;
        }
        else {
            this.ssr = `<${tag}></${tag}>`;
        }
    }
    get outerHTML() {
        return this.innerText;
    }
    get innerHTML() {
        var _a, _b;
        const reg = /(^<[a-z]+>)([\s\S]*)(<\/[a-z]+>$)/gm;
        return (_b = (_a = reg.exec(this.ssr)) === null || _a === void 0 ? void 0 : _a[2]) !== null && _b !== void 0 ? _b : "";
    }
    get innerText() {
        var _a, _b;
        const reg = /(^<[^>]+>)(.+)?(<\/[a-z]+>$|\/>$)/gm;
        return (_b = (_a = reg.exec(this.ssr)) === null || _a === void 0 ? void 0 : _a[2]) !== null && _b !== void 0 ? _b : "";
    }
    set innerText(text) {
        const reg = /(^<[^>]+>)(.+)?(<\/[a-z]+>$|\/>$)/gm;
        this.ssr = this.ssr.replace(reg, `$1${text}$3`);
    }
    get attributes() {
        return { length: 1 };
    }
    get children() {
        const reg = /<([a-z]+)((?!<\/\1).)*<\/\1>/gms;
        const array = [];
        let match;
        while ((match = reg.exec(this.innerHTML)) !== null) {
            array.push(match[0].replace(/[\s]+/gm, " "));
        }
        return array;
    }
    setAttributeNS(name, value) {
        this.setAttribute(name, value);
    }
    setAttribute(name, value) {
        if (this.selfClosing)
            this.ssr = this.ssr.replace(/(^<[a-z]+ )(.+)/gm, `$1${name}="${value}" $2`);
        else
            this.ssr = this.ssr.replace(/(^<[^>]+)(.+)/gm, `$1 ${name}="${value}"$2`);
    }
    appendChild(child) {
        const append = child.ssr ? child.ssr : child;
        const index = this.ssr.lastIndexOf("</");
        this.ssr =
            this.ssr.substring(0, index) + append + this.ssr.substring(index);
    }
    replaceChild(newChild, _oldChild) {
        this.innerText = newChild.ssr;
    }
    addEventListener(_type, _listener, _options) { }
}
exports.HTMLElementSSR = HTMLElementSSR;


/***/ }),

/***/ "./src/ssr/index.ts":
/*!**************************!*\
  !*** ./src/ssr/index.ts ***!
  \**************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.HTMLElementSSR = exports.DocumentSSR = exports.renderToString = void 0;
var renderToString_1 = __webpack_require__(/*! ./renderToString */ "./src/ssr/renderToString.ts");
Object.defineProperty(exports, "renderToString", ({ enumerable: true, get: function () { return renderToString_1.renderToString; } }));
var document_1 = __webpack_require__(/*! ./document */ "./src/ssr/document.ts");
Object.defineProperty(exports, "DocumentSSR", ({ enumerable: true, get: function () { return document_1.DocumentSSR; } }));
var elements_1 = __webpack_require__(/*! ./elements */ "./src/ssr/elements.ts");
Object.defineProperty(exports, "HTMLElementSSR", ({ enumerable: true, get: function () { return elements_1.HTMLElementSSR; } }));


/***/ }),

/***/ "./src/ssr/renderToString.ts":
/*!***********************************!*\
  !*** ./src/ssr/renderToString.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.renderToString = exports.initSSR = void 0;
const _1 = __webpack_require__(/*! . */ "./src/ssr/index.ts");
const core_1 = __webpack_require__(/*! ../core */ "./src/core/index.ts");
const utils_1 = __webpack_require__(/*! ../utils */ "./src/utils.ts");
globalThis.isSSR = (0, utils_1.detectSSR)() === true ? true : undefined;
globalThis._nano = { isSSR, location: { pathname: "/" } };
function initSSR(pathname = "/") {
    _nano.location = { pathname };
    // @ts-ignore
    globalThis.document = isSSR ? new _1.DocumentSSR() : window.document;
}
exports.initSSR = initSSR;
function renderToString(component, options = {}) {
    const { pathname, clearState = true } = options;
    initSSR(pathname);
    if (clearState)
        core_1._state.clear();
    return (0, core_1.render)(component, null, true).join("");
}
exports.renderToString = renderToString;


/***/ }),

/***/ "./src/utils.ts":
/*!**********************!*\
  !*** ./src/utils.ts ***!
  \**********************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.addStylesToHead = exports.nodeToString = exports.task = exports.onNodeRemove = exports.isDescendant = exports.strToHash = exports.detectSSR = exports.isEvent = exports.nextTick = void 0;
const _1 = __webpack_require__(/*! . */ "./src/index.ts");
exports.nextTick = typeof Promise === "function"
    ? Promise.prototype.then.bind(Promise.resolve())
    : setTimeout;
function isEvent(el, prop) {
    if (prop.indexOf("on") !== 0) {
        return false;
    }
    if (el.ssr)
        return true;
    return ["function", "object"].includes(typeof el[prop]);
}
exports.isEvent = isEvent;
function detectSSR() {
    return (
    //@ts-ignore
    typeof Deno !== "undefined" || typeof window === "undefined" /* && isSSR */);
}
exports.detectSSR = detectSSR;
function strToHash(str) {
    let hash = 0;
    if (!str.length)
        return hash;
    for (let i = 0; i < str.length; i++) {
        const char = str.charCodeAt(i);
        hash = (hash << 5) - hash + char;
        hash |= 0;
    }
    return Math.abs(hash).toString(32);
}
exports.strToHash = strToHash;
function isDescendant(descendant, root) {
    return (descendant &&
        (descendant === root || isDescendant(descendant.parentNode, root)));
}
exports.isDescendant = isDescendant;
function onNodeRemove(el, callback) {
    let observer = new MutationObserver((mutList) => {
        for (const mut of mutList) {
            mut.removedNodes.forEach((removedNode) => {
                if (isDescendant(el, removedNode)) {
                    callback();
                    if (observer) {
                        observer.disconnect();
                        // @ts-ignore
                        observer = undefined;
                    }
                }
            });
        }
    });
    observer.observe(document, {
        childList: true,
        subtree: true,
    });
    return observer;
}
exports.onNodeRemove = onNodeRemove;
function task(func) {
    return setTimeout(func, 0);
}
exports.task = task;
function nodeToString(node) {
    const temp = document.createDocumentFragment();
    temp.appendChild(node.cloneNode(true));
    return temp.toString();
}
exports.nodeToString = nodeToString;
const addStylesToHead = (styles, hash) => {
    const el = document.querySelector(`[data-css-hash*="${hash}"]`);
    if (!el) {
        const styleElement = (0, _1.h)("style", { "data-css-hash": hash }, styles);
        document.head.appendChild(styleElement);
    }
};
exports.addStylesToHead = addStylesToHead;


/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
var __webpack_exports__ = {};
// This entry need to be wrapped in an IIFE because it need to be isolated against other modules in the chunk.
(() => {
var exports = __webpack_exports__;
/*!*****************************!*\
  !*** ./src/bundles/full.ts ***!
  \*****************************/

Object.defineProperty(exports, "__esModule", ({ value: true }));
const __1 = __webpack_require__(/*! .. */ "./src/index.ts");
exports["default"] = {
    Suspense: __1.Suspense,
    Link: __1.Link,
    Switch: __1.Switch,
    Route: __1.Route,
    ViraLink: __1.ViraLink,
    Img: __1.Img,
    Helmet: __1.Helmet,
    Visible: __1.Visible,
    h: __1.h,
    nextTick: __1.nextTick,
    render: __1.render,
    hydrate: __1.hydrate,
    renderToString: __1.renderToString,
    Fragment: __1.Fragment,
    Component: __1.Component,
    withStyles: __1.withStyles,
    createContext: __1.createContext,
    lazyHydration: __1.lazyHydration,
    Store: __1.Store,
};

})();

vira = __webpack_exports__["default"];
/******/ })()
;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUNSLFNBQVMsRUFBVCxhQUFTO0lBQ1QsVUFBVSxFQUFWLGNBQVU7SUFDVixhQUFhLEVBQWIsaUJBQWE7SUFDYixhQUFhLEVBQWIsaUJBQWE7SUFDYixLQUFLLEVBQUwsU0FBSztDQUNOLENBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92aXJhLy4vc3JjL2NvbXBvbmVudHMvaGVsbWV0LnRzIiwid2VicGFjazovL3ZpcmEvLi9zcmMvY29tcG9uZW50cy9pbWcudHMiLCJ3ZWJwYWNrOi8vdmlyYS8uL3NyYy9jb21wb25lbnRzL2luZGV4LnRzIiwid2VicGFjazovL3ZpcmEvLi9zcmMvY29tcG9uZW50cy9saW5rLnRzIiwid2VicGFjazovL3ZpcmEvLi9zcmMvY29tcG9uZW50cy9yb3V0ZXIudHMiLCJ3ZWJwYWNrOi8vdmlyYS8uL3NyYy9jb21wb25lbnRzL3N1c3BlbnNlLnRzIiwid2VicGFjazovL3ZpcmEvLi9zcmMvY29tcG9uZW50cy92aXNpYmxlLnRzIiwid2VicGFjazovL3ZpcmEvLi9zcmMvY29yZS9hcHBlbmRDaGlsZHJlbi50cyIsIndlYnBhY2s6Ly92aXJhLy4vc3JjL2NvcmUvY29tcG9uZW50LnRzIiwid2VicGFjazovL3ZpcmEvLi9zcmMvY29yZS9jb250ZXh0LnRzIiwid2VicGFjazovL3ZpcmEvLi9zcmMvY29yZS9mcmFnbWVudC50cyIsIndlYnBhY2s6Ly92aXJhLy4vc3JjL2NvcmUvaC50cyIsIndlYnBhY2s6Ly92aXJhLy4vc3JjL2NvcmUvaHlkcmF0ZS50cyIsIndlYnBhY2s6Ly92aXJhLy4vc3JjL2NvcmUvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vdmlyYS8uL3NyYy9jb3JlL2xhenlIeWRyYXRpb24udHMiLCJ3ZWJwYWNrOi8vdmlyYS8uL3NyYy9jb3JlL3JlbmRlci50cyIsIndlYnBhY2s6Ly92aXJhLy4vc3JjL2NvcmUvcmVuZGVyRWxlbWVudC50cyIsIndlYnBhY2s6Ly92aXJhLy4vc3JjL2NvcmUvc3RhdGUudHMiLCJ3ZWJwYWNrOi8vdmlyYS8uL3NyYy9jb3JlL3N0b3JlLnRzIiwid2VicGFjazovL3ZpcmEvLi9zcmMvY29yZS93aXRoU3R5bGVzLnRzIiwid2VicGFjazovL3ZpcmEvLi9zcmMvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vdmlyYS8uL3NyYy9zc3IvZG9jdW1lbnQudHMiLCJ3ZWJwYWNrOi8vdmlyYS8uL3NyYy9zc3IvZWxlbWVudHMudHMiLCJ3ZWJwYWNrOi8vdmlyYS8uL3NyYy9zc3IvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vdmlyYS8uL3NyYy9zc3IvcmVuZGVyVG9TdHJpbmcudHMiLCJ3ZWJwYWNrOi8vdmlyYS8uL3NyYy91dGlscy50cyIsIndlYnBhY2s6Ly92aXJhL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL3ZpcmEvLi9zcmMvYnVuZGxlcy9mdWxsLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGFwcGVuZENoaWxkcmVuLCBDb21wb25lbnQsIGggfSBmcm9tIFwiLi4vY29yZVwiO1xuXG5leHBvcnQgY2xhc3MgSGVsbWV0IGV4dGVuZHMgQ29tcG9uZW50IHtcbiAgc3RhdGljIFNTUihib2R5OiBzdHJpbmcpIHtcbiAgICBjb25zdCByZWcgPSAvKDxoZWxtZXRcXGJbXj5dKj4pKCgufFxcbikqPykoPFxcL2hlbG1ldD4pL2dtO1xuXG4gICAgY29uc3QgaGVhZDogc3RyaW5nW10gPSBbXTtcbiAgICBjb25zdCBmb290ZXI6IHN0cmluZ1tdID0gW107XG5cbiAgICBpZiAoZG9jdW1lbnQ/LmhlYWQpIHtcbiAgICAgIGxldCBjaGlsZHJlbiA9IGRvY3VtZW50LmhlYWQuY2hpbGRyZW4gYXMgdW5rbm93biBhcyBzdHJpbmdbXTtcblxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjaGlsZHJlbi5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAoaGVhZC5pbmRleE9mKGNoaWxkcmVuW2ldKSA9PT0gLTEpIHtcbiAgICAgICAgICBoZWFkLnB1c2goY2hpbGRyZW5baV0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgbGV0IHJlc3VsdDtcblxuICAgIHdoaWxlICgocmVzdWx0ID0gcmVnLmV4ZWMoYm9keSkpICE9IG51bGwpIHtcbiAgICAgIGNvbnN0IGZpcnN0ID0gcmVzdWx0WzFdO1xuICAgICAgY29uc3Qgc2Vjb25kID0gcmVzdWx0WzJdO1xuXG4gICAgICBjb25zdCB0b0hlYWQgPSBmaXJzdC5pbmNsdWRlcygnZGF0YS1wbGFjZW1lbnQ9XCJoZWFkXCInKTtcblxuICAgICAgaWYgKHRvSGVhZCAmJiAhaGVhZC5pbmNsdWRlcyhzZWNvbmQpKSBoZWFkLnB1c2goc2Vjb25kKTtcbiAgICAgIGVsc2UgaWYgKCFmb290ZXIuaW5jbHVkZXMoc2Vjb25kKSkgZm9vdGVyLnB1c2goc2Vjb25kKTtcbiAgICB9XG5cbiAgICBjb25zdCBjbGVhbkJvZHkgPSBib2R5LnJlcGxhY2UocmVnLCBcIlwiKTtcbiAgICByZXR1cm4ge1xuICAgICAgYm9keTogY2xlYW5Cb2R5LFxuICAgICAgaGVhZCxcbiAgICAgIGZvb3RlcixcbiAgICB9O1xuICB9XG5cbiAgbW91bnQoKSB7XG4gICAgZm9yIChjb25zdCBlbGVtZW50IG9mIHRoaXMucHJvcHMuY2hpbGRyZW4pIHtcbiAgICAgIGNvbnN0IHBhcmVudCA9IHRoaXMucHJvcHMuZm9vdGVyID8gZG9jdW1lbnQuYm9keSA6IGRvY3VtZW50LmhlYWQ7XG4gICAgICBjb25zdCB0YWcgPSAoZWxlbWVudCBhcyBIVE1MRWxlbWVudCkudGFnTmFtZTtcbiAgICAgIGxldCBhdHRyczogc3RyaW5nW10gPSBbXTtcblxuICAgICAgYXR0cnMucHVzaChlbGVtZW50LmlubmVyVGV4dCk7XG5cbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZWxlbWVudC5hdHRyaWJ1dGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGF0dHJzLnB1c2goZWxlbWVudC5hdHRyaWJ1dGVzLml0ZW0oaSk/Lm5hbWUudG9Mb3dlckNhc2UoKSk7XG4gICAgICAgIGF0dHJzLnB1c2goZWxlbWVudC5hdHRyaWJ1dGVzLml0ZW0oaSk/LnZhbHVlLnRvTG93ZXJDYXNlKCkpO1xuICAgICAgfVxuXG4gICAgICBpZiAodGFnID09PSBcIkhUTUxcIiB8fCB0YWcgPT09IFwiQk9EWVwiKSB7XG4gICAgICAgIGNvbnN0IGh0bWxUYWcgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSh0YWcpWzBdO1xuICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8IGVsZW1lbnQuYXR0cmlidXRlcy5sZW5ndGg7IGkgKz0gMikge1xuICAgICAgICAgIGh0bWxUYWcuc2V0QXR0cmlidXRlKGF0dHJzW2ldLCBhdHRyc1tpICsgMV0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybjtcbiAgICAgIH0gZWxzZSBpZiAodGFnID09PSBcIlRJVExFXCIpIHtcbiAgICAgICAgY29uc3QgdGl0bGVUYWcgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcbiAgICAgICAgICB0YWcsXG4gICAgICAgICkgYXMgSFRNTENvbGxlY3Rpb25PZjxIVE1MVGl0bGVFbGVtZW50PjtcblxuICAgICAgICBpZiAodGl0bGVUYWcubGVuZ3RoKSB7XG4gICAgICAgICAgdGl0bGVUYWdbMF0udGV4dCA9IGVsZW1lbnQudGV4dDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zdCB0aXRsZVRhZyA9IGgoXG4gICAgICAgICAgICBcInRpdGxlXCIsXG4gICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgZWxlbWVudC5pbm5lckhUTUwsXG4gICAgICAgICAgKSBhcyBIVE1MVGl0bGVFbGVtZW50O1xuICAgICAgICAgIHBhcmVudC5hcHBlbmRDaGlsZCh0aXRsZVRhZyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBsZXQgZXhpc3RzID0gZmFsc2U7XG4gICAgICBhdHRycyA9IGF0dHJzLnNvcnQoKTtcblxuICAgICAgY29uc3QgZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcbiAgICAgICAgdGFnLFxuICAgICAgKSBhcyBIVE1MQ29sbGVjdGlvbk9mPEhUTUxFbGVtZW50PjtcblxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBlbC5sZW5ndGg7IGkrKykge1xuICAgICAgICBsZXQgYXR0cnMyOiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgICAgIGF0dHJzMi5wdXNoKGVsW2ldLmlubmVyVGV4dCk7XG5cbiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBlbFtpXS5hdHRyaWJ1dGVzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgYXR0cnMyLnB1c2goZWxbaV0uYXR0cmlidXRlcy5pdGVtKGopPy5uYW1lLnRvTG93ZXJDYXNlKCkgYXMgc3RyaW5nKTtcbiAgICAgICAgICBhdHRyczIucHVzaChlbFtpXS5hdHRyaWJ1dGVzLml0ZW0oaik/LnZhbHVlLnRvTG93ZXJDYXNlKCkgYXMgc3RyaW5nKTtcbiAgICAgICAgfVxuICAgICAgICBhdHRyczIgPSBhdHRyczIuc29ydCgpO1xuXG4gICAgICAgIGlmIChcbiAgICAgICAgICBhdHRycy5sZW5ndGggPiAwICYmXG4gICAgICAgICAgYXR0cnMyLmxlbmd0aCA+IDAgJiZcbiAgICAgICAgICBKU09OLnN0cmluZ2lmeShhdHRycykgPT09IEpTT04uc3RyaW5naWZ5KGF0dHJzMilcbiAgICAgICAgKVxuICAgICAgICAgIGV4aXN0cyA9IHRydWU7XG4gICAgICB9XG5cbiAgICAgIGlmICghZXhpc3RzKSB7XG4gICAgICAgIGFwcGVuZENoaWxkcmVuKHBhcmVudCwgZWxlbWVudCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmVuZGVyKCkge1xuICAgIGlmIChpc1NTUikge1xuICAgICAgcmV0dXJuIGgoXG4gICAgICAgIFwiaGVsbWV0XCIsXG4gICAgICAgIHtcbiAgICAgICAgICBcImRhdGEtc3NyXCI6IHRydWUsXG4gICAgICAgICAgXCJkYXRhLXBsYWNlbWVudFwiOiB0aGlzLnByb3BzLmZvb3RlciA/IFwiZm9vdGVyXCIgOiBcImhlYWRcIixcbiAgICAgICAgfSxcbiAgICAgICAgdGhpcy5wcm9wcy5jaGlsZHJlbixcbiAgICAgICk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBbXTtcbiAgICB9XG4gIH1cbn1cbiIsImltcG9ydCB7IENvbXBvbmVudCwgaCB9IGZyb20gXCIuLi9jb3JlXCI7XG5pbXBvcnQgeyBzdHJUb0hhc2ggfSBmcm9tIFwiLi4vdXRpbHNcIjtcblxuZXhwb3J0IGNsYXNzIEltZyBleHRlbmRzIENvbXBvbmVudCB7XG4gIGNvbnN0cnVjdG9yKHByb3BzOiBhbnkpIHtcbiAgICBzdXBlcihwcm9wcyk7XG5cbiAgICBjb25zdCB7IGtleSwgc3JjIH0gPSB0aGlzLnByb3BzO1xuICAgIHRoaXMuaWQgPSBzdHJUb0hhc2goc3JjKSArIFwiLVwiICsgc3RyVG9IYXNoKEpTT04uc3RyaW5naWZ5KHRoaXMucHJvcHMpKTtcbiAgICBpZiAoa2V5KSB7XG4gICAgICB0aGlzLmlkICs9IGAka2V5LSR7a2V5fWA7XG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLnN0YXRlKSB7XG4gICAgICB0aGlzLnNldFN0YXRlKHsgaW1hZ2U6IFwiXCIsIGlzTG9hZGVkOiBmYWxzZSB9KTtcbiAgICB9XG4gIH1cblxuICBtb3VudCgpIHtcbiAgICBjb25zdCB7XG4gICAgICBsYXp5ID0gdHJ1ZSxcbiAgICAgIHBsYWNlaG9sZGVyLFxuICAgICAga2V5LFxuICAgICAgcmVmLFxuICAgICAgY2hpbGRyZW4sXG4gICAgICAuLi5yZXN0XG4gICAgfSA9IHRoaXMucHJvcHM7XG5cbiAgICBpZiAoIWxhenkpIHJldHVybjtcblxuICAgIGNvbnN0IG9ic2VydmVyID0gbmV3IEludGVyc2VjdGlvbk9ic2VydmVyKFxuICAgICAgKGVudHJpZXMsIG9ic2VydmVyKSA9PiB7XG4gICAgICAgIGZvciAoY29uc3QgZW50cnkgb2YgZW50cmllcykge1xuICAgICAgICAgIGlmIChlbnRyeS5pc0ludGVyc2VjdGluZykge1xuICAgICAgICAgICAgb2JzZXJ2ZXIuZGlzY29ubmVjdCgpO1xuICAgICAgICAgICAgdGhpcy5zdGF0ZS5pbWFnZSA9IGgoXCJpbWdcIiwgeyAuLi5yZXN0IH0pO1xuICAgICAgICAgICAgaWYgKHRoaXMuc3RhdGUuaW1hZ2UuY29tcGxldGUpIHtcbiAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5pc0xvYWRlZCA9IHRydWU7XG4gICAgICAgICAgICAgIHRoaXMudXBkYXRlKCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICB0aGlzLnN0YXRlLmltYWdlLm9ubG9hZCA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLmlzTG9hZGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZSgpO1xuICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIHsgdGhyZXNob2xkOiBbMCwgMV0gfSxcbiAgICApO1xuXG4gICAgb2JzZXJ2ZXIub2JzZXJ2ZSh0aGlzLmVsZW1lbnRzWzBdKTtcbiAgfVxuXG4gIHJlbmRlcigpIHtcbiAgICBjb25zdCB7XG4gICAgICBsYXp5ID0gdHJ1ZSxcbiAgICAgIHNyYyxcbiAgICAgIHBsYWNlaG9sZGVyLFxuICAgICAga2V5LFxuICAgICAgcmVmLFxuICAgICAgY2hpbGRyZW4sXG4gICAgICAuLi5yZXN0XG4gICAgfSA9IHRoaXMucHJvcHM7XG5cbiAgICBpZiAoIWxhenkpIHtcbiAgICAgIHRoaXMuc3RhdGUuaW1hZ2UgPSBoKFwiaW1nXCIsIHsgc3JjLCAuLi5yZXN0IH0pO1xuICAgICAgcmV0dXJuIHRoaXMuc3RhdGUuaW1hZ2U7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuc3RhdGUuaXNMb2FkZWQpIHtcbiAgICAgIHJldHVybiB0aGlzLnN0YXRlLmltYWdlO1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIHBsYWNlaG9sZGVyID09PSBcInN0cmluZ1wiKSB7XG4gICAgICByZXR1cm4gaChcImltZ1wiLCB7IHNyYzogcGxhY2Vob2xkZXIsIC4uLnJlc3QgfSk7XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgcGxhY2Vob2xkZXIgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgcmV0dXJuIHBsYWNlaG9sZGVyKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IHN0eWxlID0ge1xuICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IFwibGlnaHRncmF5XCIsXG4gICAgICAgIHdpZHRoOiBcIjEwMHB4XCIsXG4gICAgICAgIGhlaWdodDogXCIxMDBweFwiLFxuICAgICAgfTtcblxuICAgICAgY29uc3QgeyB3aWR0aCwgaGVpZ2h0LCAuLi5vdGhlcnMgfSA9IHJlc3Q7XG4gICAgICBpZiAod2lkdGgpIHtcbiAgICAgICAgc3R5bGUud2lkdGggPSB3aWR0aDtcbiAgICAgIH1cbiAgICAgIGlmIChoZWlnaHQpIHtcbiAgICAgICAgc3R5bGUuaGVpZ2h0ID0gaGVpZ2h0O1xuICAgICAgfVxuICAgICAgcmV0dXJuIGgoXCJkaXZcIiwgeyBzdHlsZSwgLi4ub3RoZXJzIH0pO1xuICAgIH1cbiAgfVxufVxuIiwiZXhwb3J0IHsgSGVsbWV0IH0gZnJvbSBcIi4vaGVsbWV0XCI7XG5leHBvcnQgeyBJbWcgfSBmcm9tIFwiLi9pbWdcIjtcbmV4cG9ydCB7IExpbmsgfSBmcm9tIFwiLi9saW5rXCI7XG5leHBvcnQgeyBTdXNwZW5zZSB9IGZyb20gXCIuL3N1c3BlbnNlXCI7XG5leHBvcnQgeyBWaXNpYmxlIH0gZnJvbSBcIi4vdmlzaWJsZVwiO1xuZXhwb3J0IHsgUm91dGUsIFN3aXRjaCwgTGluayBhcyBWaXJhTGluayB9IGZyb20gXCIuL3JvdXRlclwiO1xuIiwiaW1wb3J0IHsgQ29tcG9uZW50LCBGcmFnbWVudCwgaCB9IGZyb20gXCIuLi9jb3JlXCI7XG5pbXBvcnQgeyBIZWxtZXQgfSBmcm9tIFwiLi9oZWxtZXRcIjtcblxuZXhwb3J0IGNsYXNzIExpbmsgZXh0ZW5kcyBDb21wb25lbnQge1xuICBtb3VudCgpIHtcbiAgICBjb25zdCB7IHByZWZldGNoLCBocmVmLCBkZWxheSwgYmFjayA9IGZhbHNlIH0gPSB0aGlzLnByb3BzO1xuXG4gICAgaWYgKGJhY2spIHtcbiAgICAgIHRoaXMuZWxlbWVudHNbMF0uYWRkRXZlbnRMaXN0ZW5lcihcbiAgICAgICAgXCJjbGlja1wiLFxuICAgICAgICBmdW5jdGlvbiBvbkNsaWNrKHRoaXM6IExpbmssIGU6IEV2ZW50KSB7XG4gICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgIGNvbnN0IHRhcmdldCA9IGUudGFyZ2V0IGFzIEhUTUxMaW5rRWxlbWVudDtcbiAgICAgICAgICBpZiAodGFyZ2V0LmhyZWYgPT09IGRvY3VtZW50LnJlZmVycmVyKSB7XG4gICAgICAgICAgICB3aW5kb3cuaGlzdG9yeS5iYWNrKCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gaHJlZjtcbiAgICAgICAgICB9XG4gICAgICAgIH0uYmluZCh0aGlzKSxcbiAgICAgICk7XG4gICAgfVxuXG4gICAgaWYgKGRlbGF5KSB7XG4gICAgICB0aGlzLmVsZW1lbnRzWzBdLmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICAgIFwiY2xpY2tcIixcbiAgICAgICAgZnVuY3Rpb24gb25DbGljayh0aGlzOiBMaW5rLCBlOiBFdmVudCkge1xuICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gaHJlZjtcbiAgICAgICAgICB9LCBkZWxheSk7XG4gICAgICAgIH0uYmluZCh0aGlzKSxcbiAgICAgICk7XG4gICAgfVxuXG4gICAgaWYgKHByZWZldGNoKSB7XG4gICAgICBpZiAocHJlZmV0Y2ggPT09IFwiaG92ZXJcIikge1xuICAgICAgICB0aGlzLnByZWZldGNoT25Ib3ZlcigpO1xuICAgICAgfSBlbHNlIGlmIChwcmVmZXRjaCA9PT0gXCJ2aXNpYmxlXCIpIHtcbiAgICAgICAgdGhpcy5wcmVmZXRjaE9uVmlzaWJsZSgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5hZGRQcmVmZXRjaCgpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHByZWZldGNoT25Ib3ZlcigpIHtcbiAgICB0aGlzLmVsZW1lbnRzWzBdLmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICBcIm1vdXNlb3ZlclwiLFxuICAgICAgZnVuY3Rpb24gb25Ib3Zlcih0aGlzOiBMaW5rKSB7XG4gICAgICAgIHRoaXMuYWRkUHJlZmV0Y2goKTtcbiAgICAgIH0uYmluZCh0aGlzKSxcbiAgICAgIHsgb25jZTogdHJ1ZSB9LFxuICAgICk7XG4gIH1cblxuICBwcmVmZXRjaE9uVmlzaWJsZSgpIHtcbiAgICBjb25zdCBvYnNlcnZlciA9IG5ldyBJbnRlcnNlY3Rpb25PYnNlcnZlcihcbiAgICAgIChlbnRyaWVzLCBvYnNlcnZlcikgPT4ge1xuICAgICAgICBmb3IgKGNvbnN0IGVudHJ5IG9mIGVudHJpZXMpIHtcbiAgICAgICAgICBpZiAoZW50cnkuaXNJbnRlcnNlY3RpbmcpIHtcbiAgICAgICAgICAgIG9ic2VydmVyLmRpc2Nvbm5lY3QoKTtcbiAgICAgICAgICAgIHRoaXMuYWRkUHJlZmV0Y2goKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICB7IHRocmVzaG9sZDogWzAsIDFdIH0sXG4gICAgKTtcbiAgICBvYnNlcnZlci5vYnNlcnZlKHRoaXMuZWxlbWVudHNbMF0pO1xuICB9XG5cbiAgYWRkUHJlZmV0Y2goKSB7XG4gICAgbGV0IGV4aXN0cyA9IGZhbHNlO1xuXG4gICAgY29uc3QgbGlua3MgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImxpbmtcIik7XG5cbiAgICBmb3IgKGNvbnN0IGxpbmsgb2YgbGlua3MpIHtcbiAgICAgIGlmIChcbiAgICAgICAgbGluay5nZXRBdHRyaWJ1dGUoXCJyZWxcIikgPT09IFwicHJlZmV0Y2hcIiAmJlxuICAgICAgICBsaW5rLmdldEF0dHJpYnV0ZShcImhyZWZcIikgPT09IHRoaXMucHJvcHMuaHJlZlxuICAgICAgKSB7XG4gICAgICAgIGV4aXN0cyA9IHRydWU7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKCFleGlzdHMpIHtcbiAgICAgIGNvbnN0IHByZWZldGNoID0gaChcImxpbmtcIiwge1xuICAgICAgICByZWw6IFwicHJlZmV0Y2hcIixcbiAgICAgICAgaHJlZjogdGhpcy5wcm9wcy5ocmVmLFxuICAgICAgICBhczogXCJkb2N1bWVudFwiLFxuICAgICAgfSk7XG4gICAgICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHByZWZldGNoKTtcbiAgICB9XG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgY29uc3Qge1xuICAgICAgY2hpbGRyZW4sXG4gICAgICBwcmVmZXRjaCxcbiAgICAgIGRlbGF5LFxuICAgICAgYmFjayA9IGZhbHNlLFxuICAgICAgcmVmLFxuICAgICAgLi4ucmVzdFxuICAgIH0gPSB0aGlzLnByb3BzO1xuXG4gICAgY29uc3QgYSA9IGgoXCJhXCIsIHsgLi4ucmVzdCB9LCAuLi5jaGlsZHJlbik7XG5cbiAgICBpZiAocHJlZmV0Y2ggJiYgaXNTU1IpIHtcbiAgICAgIGNvbnN0IGxpbmsgPSBoKFwibGlua1wiLCB7XG4gICAgICAgIHJlbDogXCJwcmVmZXRjaFwiLFxuICAgICAgICBocmVmOiB0aGlzLnByb3BzLmhyZWYsXG4gICAgICAgIGFzOiBcImRvY3VtZW50XCIsXG4gICAgICB9KTtcbiAgICAgIGNvbnN0IGhlbG1ldCA9IGgoSGVsbWV0LCBudWxsLCBsaW5rKTtcbiAgICAgIHJldHVybiBoKEZyYWdtZW50LCBudWxsLCBbaGVsbWV0LCBhXSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBhO1xuICAgIH1cbiAgfVxufVxuIiwiaW1wb3J0IHsgaCwgcmVuZGVyRWxlbWVudCwgQ29tcG9uZW50IH0gZnJvbSBcIi4uL2NvcmVcIjtcblxuY29uc3QgaW5zdGFuY2VzOiBhbnlbXSA9IFtdO1xuXG5mdW5jdGlvbiByZWdpc3Rlcihjb21wOiBhbnkpIHtcbiAgaW5zdGFuY2VzLnB1c2goY29tcCk7XG59XG5cbmZ1bmN0aW9uIHVucmVnaXN0ZXIoY29tcDogYW55KSB7XG4gIGluc3RhbmNlcy5zcGxpY2UoaW5zdGFuY2VzLmluZGV4T2YoY29tcCksIDEpO1xufVxuXG5mdW5jdGlvbiBoaXN0b3J5UHVzaChwYXRoOiBzdHJpbmcpIHtcbiAgd2luZG93Lmhpc3RvcnkucHVzaFN0YXRlKHt9LCBcIlwiLCBwYXRoKTtcbiAgZm9yIChjb25zdCBpbnN0YW5jZSBvZiBpbnN0YW5jZXMpIHtcbiAgICBpbnN0YW5jZS5mb3JjZVVwZGF0ZSgpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGhpc3RvcnlSZXBsYWNlKHBhdGg6IHN0cmluZykge1xuICB3aW5kb3cuaGlzdG9yeS5yZXBsYWNlU3RhdGUoe30sIFwiXCIsIHBhdGgpO1xuICBmb3IgKGNvbnN0IGluc3RhbmNlIG9mIGluc3RhbmNlcykge1xuICAgIGluc3RhbmNlLmZvcmNlVXBkYXRlKCk7XG4gIH1cbn1cblxuZnVuY3Rpb24gbWF0Y2hQYXRoKFxuICBwYXRobmFtZTogc3RyaW5nLFxuICBvcHRpb25zOiB7XG4gICAgZXhhY3Q/OiBib29sZWFuO1xuICAgIHBhdGg6IHN0cmluZztcbiAgICByZWdleD86IHsgW3BhcmFtOiBzdHJpbmddOiBSZWdFeHAgfTtcbiAgfSxcbikge1xuICBjb25zdCB7IGV4YWN0ID0gZmFsc2UsIHJlZ2V4IH0gPSBvcHRpb25zO1xuICBsZXQgeyBwYXRoIH0gPSBvcHRpb25zO1xuXG4gIGlmICghcGF0aCkge1xuICAgIHJldHVybiB7XG4gICAgICBwYXRoOiBudWxsLFxuICAgICAgdXJsOiBwYXRobmFtZSxcbiAgICAgIGlzRXhhY3Q6IHRydWUsXG4gICAgfTtcbiAgfVxuXG4gIGxldCBtYXRjaDtcbiAgbGV0IHBhcmFtcyA9IHt9O1xuXG4gIC8vIHBhdGggd2l0aCBwYXJhbXNcbiAgaWYgKHBhdGguaW5jbHVkZXMoXCIvOlwiKSkge1xuICAgIGNvbnN0IHBhdGhBcnIgPSBwYXRoLnNwbGl0KFwiL1wiKTtcbiAgICBjb25zdCBwYXRobmFtZUFyciA9IHBhdGhuYW1lLnNwbGl0KFwiL1wiKTtcbiAgICBwYXRoQXJyLmZvckVhY2goKHAsIGkpID0+IHtcbiAgICAgIGlmICgvXjovLnRlc3QocCkpIHtcbiAgICAgICAgY29uc3Qga2V5ID0gcC5zbGljZSgxKTtcbiAgICAgICAgY29uc3QgdmFsdWUgPSBwYXRobmFtZUFycltpXTtcblxuICAgICAgICAvLyBpZiBhIHJlZ2V4IGlzIHByb3ZpZGVkLCBjaGVjayBpdCBpdCBtYXRjaGVzXG4gICAgICAgIGlmIChyZWdleCAmJiByZWdleFtrZXldKSB7XG4gICAgICAgICAgY29uc3QgcmVnZXhNYXRjaCA9IHJlZ2V4W2tleV0udGVzdCh2YWx1ZSk7XG4gICAgICAgICAgaWYgKCFyZWdleE1hdGNoKSByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIHBhcmFtcyA9IHsgLi4ucGFyYW1zLCBba2V5XTogdmFsdWUgfTtcblxuICAgICAgICBwYXRoQXJyW2ldID0gcGF0aG5hbWVBcnJbaV07XG4gICAgICB9XG4gICAgfSk7XG4gICAgcGF0aCA9IHBhdGhBcnIuam9pbihcIi9cIik7XG4gIH1cblxuICAvLyBjYXRjaCBhbGxcbiAgaWYgKHBhdGggPT09IFwiKlwiKSBtYXRjaCA9IFtwYXRobmFtZV07XG5cbiAgLy8gcmVndWxhciBwYXRoXG4gIGlmICghbWF0Y2gpIG1hdGNoID0gbmV3IFJlZ0V4cChgXiR7cGF0aH1gKS5leGVjKHBhdGhuYW1lKTtcblxuICBpZiAoIW1hdGNoKSByZXR1cm4gbnVsbDtcblxuICBjb25zdCB1cmwgPSBtYXRjaFswXTtcbiAgY29uc3QgaXNFeGFjdCA9IHBhdGhuYW1lID09PSB1cmw7XG5cbiAgaWYgKGV4YWN0ICYmICFpc0V4YWN0KSByZXR1cm4gbnVsbDtcblxuICByZXR1cm4ge1xuICAgIHBhdGgsXG4gICAgdXJsLFxuICAgIGlzRXhhY3QsXG4gICAgcGFyYW1zLFxuICB9O1xufVxuXG5leHBvcnQgY2xhc3MgU3dpdGNoIGV4dGVuZHMgQ29tcG9uZW50PHsgZmFsbGJhY2s/OiBhbnk7IGNoaWxkcmVuPzogYW55IH0+IHtcbiAgaW5kZXg6IG51bWJlciA9IDA7XG4gIHBhdGg6IHN0cmluZyA9IFwiXCI7XG4gIG1hdGNoID0geyBpbmRleDogLTEsIHBhdGg6IFwiXCIgfTtcblxuICBtb3VudCgpIHtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInBvcHN0YXRlXCIsIHRoaXMuZm9yY2VVcGRhdGUuYmluZCh0aGlzKSk7XG4gICAgcmVnaXN0ZXIodGhpcyk7XG4gIH1cblxuICBkZXN0cm95KCkge1xuICAgIHVucmVnaXN0ZXIodGhpcyk7XG4gICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJwb3BzdGF0ZVwiLCB0aGlzLmZvcmNlVXBkYXRlLmJpbmQodGhpcykpO1xuICB9XG5cbiAgZm9yY2VVcGRhdGUoKSB7XG4gICAgdGhpcy5maW5kQ2hpbGQoKTtcbiAgICBpZiAodGhpcy5zaG91bGRVcGRhdGUoKSkgdGhpcy51cGRhdGUoKTtcbiAgfVxuXG4gIGZpbmRDaGlsZCgpIHtcbiAgICB0aGlzLm1hdGNoID0geyBpbmRleDogLTEsIHBhdGg6IFwiXCIgfTtcblxuICAgIGZvciAoY29uc3QgW2ksIGNoaWxkXSBvZiB0aGlzLnByb3BzLmNoaWxkcmVuLmVudHJpZXMoKSkge1xuICAgICAgY29uc3QgeyBwYXRoLCBleGFjdCwgcmVnZXggfSA9IGNoaWxkLnByb3BzO1xuICAgICAgY29uc3QgbWF0Y2ggPSBtYXRjaFBhdGgoXG4gICAgICAgIHR5cGVvZiBpc1NTUiAhPT0gXCJ1bmRlZmluZWRcIlxuICAgICAgICAgID8gX25hbm8ubG9jYXRpb24ucGF0aG5hbWVcbiAgICAgICAgICA6IHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZSxcbiAgICAgICAge1xuICAgICAgICAgIHBhdGgsXG4gICAgICAgICAgZXhhY3QsXG4gICAgICAgICAgcmVnZXgsXG4gICAgICAgIH0sXG4gICAgICApO1xuXG4gICAgICBpZiAobWF0Y2gpIHtcbiAgICAgICAgdGhpcy5tYXRjaC5pbmRleCA9IGk7XG4gICAgICAgIHRoaXMubWF0Y2gucGF0aCA9IHBhdGg7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBzaG91bGRVcGRhdGUoKSB7XG4gICAgcmV0dXJuIHRoaXMucGF0aCAhPT0gdGhpcy5tYXRjaC5wYXRoIHx8IHRoaXMuaW5kZXggIT09IHRoaXMubWF0Y2guaW5kZXg7XG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgdGhpcy5maW5kQ2hpbGQoKTtcblxuICAgIGNvbnN0IGNoaWxkID0gdGhpcy5wcm9wcy5jaGlsZHJlblt0aGlzLm1hdGNoLmluZGV4XTtcblxuICAgIGlmICh0aGlzLm1hdGNoLmluZGV4ID09PSAtMSkge1xuICAgICAgdGhpcy5wYXRoID0gXCJcIjtcbiAgICAgIHRoaXMuaW5kZXggPSAwO1xuICAgIH1cblxuICAgIGlmIChjaGlsZCkge1xuICAgICAgY29uc3QgeyBwYXRoIH0gPSBjaGlsZC5wcm9wcztcbiAgICAgIHRoaXMucGF0aCA9IHBhdGg7XG4gICAgICB0aGlzLmluZGV4ID0gdGhpcy5tYXRjaC5pbmRleDtcbiAgICAgIGNvbnN0IGVsID0gcmVuZGVyRWxlbWVudChjaGlsZCk7XG4gICAgICByZXR1cm4gcmVuZGVyRWxlbWVudChlbCk7XG4gICAgfSBlbHNlIGlmICh0aGlzLnByb3BzLmZhbGxiYWNrKSB7XG4gICAgICByZXR1cm4gcmVuZGVyRWxlbWVudCh0aGlzLnByb3BzLmZhbGxiYWNrKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGgoXCJkaXZcIiwgeyBjbGFzczogXCJyb3V0ZVwiIH0sIFwibm90IGZvdW5kXCIpO1xuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gUm91dGUoe1xuICBwYXRoLFxuICByZWdleCxcbiAgY2hpbGRyZW4sXG59OiB7XG4gIGV4YWN0PzogYm9vbGVhbjtcbiAgcGF0aDogc3RyaW5nO1xuICByZWdleD86IHsgW3BhcmFtOiBzdHJpbmddOiBSZWdFeHAgfTtcbiAgY2hpbGRyZW4/OiBhbnk7XG59KSB7XG4gIGZvciAoY29uc3QgY2hpbGQgb2YgY2hpbGRyZW4pIHtcbiAgICBpZiAoY2hpbGQucHJvcHMpIGNoaWxkLnByb3BzID0geyAuLi5jaGlsZC5wcm9wcywgcm91dGU6IHsgcGF0aCwgcmVnZXggfSB9O1xuICB9XG5cbiAgcmV0dXJuIGNoaWxkcmVuO1xufVxuXG5leHBvcnQgY29uc3QgdG8gPSAodG86IHN0cmluZywgcmVwbGFjZTogYm9vbGVhbiA9IGZhbHNlKSA9PiB7XG4gIHJlcGxhY2UgPyBoaXN0b3J5UmVwbGFjZSh0bykgOiBoaXN0b3J5UHVzaCh0byk7XG59O1xuXG5leHBvcnQgZnVuY3Rpb24gTGluayh7XG4gIHRvLFxuICByZXBsYWNlLFxuICBjaGlsZHJlbixcbn06IHtcbiAgdG86IHN0cmluZztcbiAgcmVwbGFjZT86IGJvb2xlYW47XG4gIGNoaWxkcmVuPzogYW55O1xufSkge1xuICBmdW5jdGlvbiBvbkNsaWNrKGV2ZW50OiBFdmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgcmVwbGFjZSA/IGhpc3RvcnlSZXBsYWNlKHRvKSA6IGhpc3RvcnlQdXNoKHRvKTtcbiAgfVxuXG4gIHJldHVybiBoKFwiYVwiLCB7IGhyZWY6IHRvLCBvbkNsaWNrIH0sIGNoaWxkcmVuKTtcbn1cbiIsImltcG9ydCB7IENvbXBvbmVudCB9IGZyb20gXCIuLi9jb3JlXCI7XG5pbXBvcnQgeyBzdHJUb0hhc2ggfSBmcm9tIFwiLi4vdXRpbHNcIjtcblxuZXhwb3J0IGNsYXNzIFN1c3BlbnNlIGV4dGVuZHMgQ29tcG9uZW50IHtcbiAgcHJpdmF0ZSBpc1JlYWR5ID0gZmFsc2U7XG5cbiAgY29uc3RydWN0b3IocHJvcHM6IGFueSkge1xuICAgIHN1cGVyKHByb3BzKTtcblxuICAgIGNvbnN0IHsgZmFsbGJhY2ssIGNhY2hlID0gZmFsc2UsIGNoaWxkcmVuLCAuLi5yZXN0IH0gPSB0aGlzLnByb3BzO1xuXG4gICAgdGhpcy5pZCA9IHN0clRvSGFzaChcbiAgICAgIEpTT04uc3RyaW5naWZ5KHJlc3QsIGZ1bmN0aW9uIChfa2V5LCB2YWwpIHtcbiAgICAgICAgcmV0dXJuIHR5cGVvZiB2YWwgPT09IFwiZnVuY3Rpb25cIiA/IGAke3ZhbH1gIDogdmFsO1xuICAgICAgfSksXG4gICAgKTtcbiAgfVxuXG4gIGFzeW5jIG1vdW50KCkge1xuICAgIGNvbnN0IHsgZmFsbGJhY2ssIGNhY2hlID0gZmFsc2UsIGNoaWxkcmVuLCAuLi5yZXN0IH0gPSB0aGlzLnByb3BzO1xuXG4gICAgaWYgKGNhY2hlKSB0aGlzLmluaXRpYWxTdGF0ZSA9IHt9O1xuXG4gICAgaWYgKHRoaXMubG9hZEZyb21DYWNoZShjYWNoZSkpIHJldHVybjtcblxuICAgIGNvbnN0IHByb21pc2VzID0gT2JqZWN0LnZhbHVlcyhyZXN0KS5tYXAoKHA6IGFueSkgPT4gcCgpKTtcbiAgICBjb25zdCByZXNvbHZlZCA9IGF3YWl0IFByb21pc2UuYWxsKHByb21pc2VzKTtcbiAgICBjb25zdCBkYXRhID0gdGhpcy5wcmVwYXJlRGF0YShyZXN0LCByZXNvbHZlZCwgY2FjaGUpO1xuXG4gICAgdGhpcy5hZGREYXRhVG9DaGlsZHJlbihkYXRhKTtcblxuICAgIHRoaXMuaXNSZWFkeSA9IHRydWU7XG4gICAgdGhpcy51cGRhdGUoKTtcbiAgfVxuXG4gIHByaXZhdGUgbG9hZEZyb21DYWNoZShjYWNoZTogYm9vbGVhbikge1xuICAgIGNvbnN0IGNhY2hlZCA9IHRoaXMuc3RhdGUgJiYgY2FjaGUgJiYgT2JqZWN0LmtleXModGhpcy5zdGF0ZSkubGVuZ3RoO1xuXG4gICAgaWYgKGNhY2hlKSB7XG4gICAgICB0aGlzLmFkZERhdGFUb0NoaWxkcmVuKHRoaXMuc3RhdGUpO1xuICAgICAgdGhpcy5pc1JlYWR5ID0gdHJ1ZTtcbiAgICB9XG5cbiAgICByZXR1cm4gY2FjaGVkO1xuICB9XG5cbiAgcHJpdmF0ZSBzc3IoKSB7XG4gICAgY29uc3QgeyBmYWxsYmFjaywgY2FjaGUgPSBmYWxzZSwgY2hpbGRyZW4sIC4uLnJlc3QgfSA9IHRoaXMucHJvcHM7XG5cbiAgICBjb25zdCBmdW5jcyA9IE9iamVjdC52YWx1ZXMocmVzdCkubWFwKChwOiBhbnkpID0+IHAoKSk7XG5cbiAgICBjb25zdCBkYXRhID0gdGhpcy5wcmVwYXJlRGF0YShyZXN0LCBmdW5jcywgZmFsc2UpO1xuXG4gICAgdGhpcy5hZGREYXRhVG9DaGlsZHJlbihkYXRhKTtcbiAgfVxuXG4gIHByaXZhdGUgYWRkRGF0YVRvQ2hpbGRyZW4oZGF0YTogYW55KSB7XG4gICAgZm9yIChjb25zdCBjaGlsZCBvZiB0aGlzLnByb3BzLmNoaWxkcmVuKSB7XG4gICAgICBpZiAoY2hpbGQucHJvcHMpIHtcbiAgICAgICAgY2hpbGQucHJvcHMgPSB7IC4uLmNoaWxkLnByb3BzLCAuLi5kYXRhIH07XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBwcmVwYXJlRGF0YShyZXN0OiBhbnksIGZ1bmM6IGFueSwgY2FjaGU6IGJvb2xlYW4pIHtcbiAgICBjb25zdCBkYXRhID0gT2JqZWN0LmtleXMocmVzdCkucmVkdWNlKChhY2MsIGl0ZW0sIGluZGV4KSA9PiB7XG4gICAgICBpZiAoY2FjaGUpIHtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHsgLi4udGhpcy5zdGF0ZSwgW2l0ZW1dOiBmdW5jW2luZGV4XSB9O1xuICAgICAgfVxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgLi4uYWNjLFxuICAgICAgICBbaXRlbV06IGZ1bmNbaW5kZXhdLFxuICAgICAgfTtcbiAgICB9LCB7fSk7XG4gICAgcmV0dXJuIGRhdGE7XG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgaWYgKHR5cGVvZiBpc1NTUiA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgY29uc3QgeyBjYWNoZSA9IGZhbHNlIH0gPSB0aGlzLnByb3BzO1xuICAgICAgdGhpcy5sb2FkRnJvbUNhY2hlKGNhY2hlKTtcbiAgICAgIHJldHVybiB0aGlzLmlzUmVhZHkgPyB0aGlzLnByb3BzLmNoaWxkcmVuIDogdGhpcy5wcm9wcy5mYWxsYmFjaztcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5zc3IoKTtcbiAgICAgIHJldHVybiB0aGlzLnByb3BzLmNoaWxkcmVuO1xuICAgIH1cbiAgfVxufVxuIiwiaW1wb3J0IHsgQ29tcG9uZW50LCBoLCByZW5kZXIgfSBmcm9tIFwiLi4vY29yZVwiO1xuXG5leHBvcnQgY2xhc3MgVmlzaWJsZSBleHRlbmRzIENvbXBvbmVudCB7XG4gIHByaXZhdGUgaXNWaXNpYmxlID0gZmFsc2U7XG5cbiAgbW91bnQoKSB7XG4gICAgY29uc3Qgb2JzZXJ2ZXIgPSBuZXcgSW50ZXJzZWN0aW9uT2JzZXJ2ZXIoXG4gICAgICAoZW50cmllcywgb2JzZXJ2ZXIpID0+IHtcbiAgICAgICAgZm9yIChjb25zdCBlbnRyeSBvZiBlbnRyaWVzKSB7XG4gICAgICAgICAgaWYgKGVudHJ5LmlzSW50ZXJzZWN0aW5nKSB7XG4gICAgICAgICAgICBvYnNlcnZlci5kaXNjb25uZWN0KCk7XG4gICAgICAgICAgICB0aGlzLmlzVmlzaWJsZSA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIHsgdGhyZXNob2xkOiBbMCwgMV0gfSxcbiAgICApO1xuXG4gICAgb2JzZXJ2ZXIub2JzZXJ2ZSh0aGlzLmVsZW1lbnRzWzBdKTtcbiAgfVxuICByZW5kZXIoKSB7XG4gICAgaWYgKHRoaXMuaXNWaXNpYmxlKSB7XG4gICAgICBpZiAodGhpcy5wcm9wcy5vblZpc2libGUpIHtcbiAgICAgICAgdGhpcy5wcm9wcy5vblZpc2libGUoKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZW5kZXIodGhpcy5wcm9wcy5jb21wb25lbnQgfHwgdGhpcy5wcm9wcy5jaGlsZHJlblswXSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBoKFwiZGl2XCIsIHsgXCJkYXRhLXZpc2libGVcIjogZmFsc2UsIHZpc2liaWxpdHk6IFwiaGlkZGVuXCIgfSk7XG4gICAgfVxuICB9XG59XG4iLCJpbXBvcnQgeyByZW5kZXJFbGVtZW50IH0gZnJvbSBcIi5cIjtcblxuZXhwb3J0IGZ1bmN0aW9uIGFwcGVuZENoaWxkcmVuKGVsZW1lbnQ6IEhUTUxFbGVtZW50LCBjaGlsZHJlbjogYW55KSB7XG4gIGlmICghQXJyYXkuaXNBcnJheShjaGlsZHJlbikpIHtcbiAgICBhcHBlbmRDaGlsZHJlbihlbGVtZW50LCBbY2hpbGRyZW5dKTtcbiAgICByZXR1cm47XG4gIH1cbiAgaWYgKHR5cGVvZiBjaGlsZHJlbiA9PT0gXCJvYmplY3RcIikge1xuICAgIGNoaWxkcmVuID0gQXJyYXkuZnJvbShjaGlsZHJlbik7XG4gIH1cblxuICBmb3IgKGNvbnN0IGNoaWxkIG9mIGNoaWxkcmVuKSB7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkoY2hpbGQpKSB7XG4gICAgICBhcHBlbmRDaGlsZHJlbihlbGVtZW50LCBjaGlsZCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGxldCBjb21wID0gcmVuZGVyRWxlbWVudChjaGlsZCkgYXMgSFRNTEVsZW1lbnQ7XG5cbiAgICAgIGlmIChjb21wKSB7XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KGNvbXApKSB7XG4gICAgICAgICAgYXBwZW5kQ2hpbGRyZW4oZWxlbWVudCwgY29tcCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZWxlbWVudC5hcHBlbmRDaGlsZChcbiAgICAgICAgICAgICFjb21wPy5ub2RlVHlwZSA/IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKFwiXCIgKyBjb21wKSA6IGNvbXAsXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxufVxuIiwiaW1wb3J0IHsgbmV4dFRpY2ssIG9uTm9kZVJlbW92ZSB9IGZyb20gXCIuLi91dGlsc1wiO1xuaW1wb3J0IHsgcmVuZGVyRWxlbWVudCwgX3N0YXRlIH0gZnJvbSBcIi5cIjtcblxuZXhwb3J0IGNsYXNzIENvbXBvbmVudDxQIGV4dGVuZHMgT2JqZWN0ID0gYW55LCBTID0gYW55PiB7XG4gIHB1YmxpYyBpZDogc3RyaW5nIHwgbnVtYmVyO1xuICBwcml2YXRlIF9za2lwVW5tb3V0OiBib29sZWFuO1xuICBwcml2YXRlIF9oYXNVbm1vdW50ZWQ6IGJvb2xlYW47XG4gIHByaXZhdGUgX2VsZW1lbnRzOiBIVE1MRWxlbWVudFtdID0gW107XG5cbiAgY29uc3RydWN0b3IocHVibGljIHByb3BzOiBQKSB7XG4gICAgdGhpcy5pZCA9IHRoaXMuX2dldEhhc2goKTtcbiAgfVxuXG4gIHB1YmxpYyByZW5kZXIoX3VwZGF0ZT86IGFueSkge31cbiAgcHVibGljIG1vdW50KCkge31cbiAgcHVibGljIGJlZm9yZU1vdW50KCkge31cbiAgcHVibGljIGRlc3Ryb3koKSB7fVxuICBwcml2YXRlIF9nZXRIYXNoKCk6IGFueSB7fVxuXG4gIHNldFN0YXRlKHN0YXRlOiBTLCBzaG91bGRVcGRhdGU6IGJvb2xlYW4gPSBmYWxzZSkge1xuICAgIGlmIChzdGF0ZSAmJiB0eXBlb2Ygc3RhdGUgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgIHRoaXMuc3RhdGUgPSB7IC4uLnRoaXMuc3RhdGUsIC4uLnN0YXRlIH07XG4gICAgfSBlbHNlIHRoaXMuc3RhdGUgPSBzdGF0ZTtcblxuICAgIGlmIChzaG91bGRVcGRhdGUpIHRoaXMudXBkYXRlKCk7XG4gIH1cblxuICBnZXQgc3RhdGUoKSB7XG4gICAgcmV0dXJuIF9zdGF0ZS5nZXQodGhpcy5pZCk7XG4gIH1cblxuICBzZXQgc3RhdGUodmFsdWU6IFMpIHtcbiAgICBfc3RhdGUuc2V0KHRoaXMuaWQsIHZhbHVlKTtcbiAgfVxuXG4gIHNldCBpbml0aWFsU3RhdGUoc3RhdGU6IFMpIHtcbiAgICBpZiAoIXRoaXMuc3RhdGUpIHRoaXMuc3RhdGUgPSBzdGF0ZTtcbiAgfVxuXG4gIHB1YmxpYyBnZXQgZWxlbWVudHMoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2VsZW1lbnRzO1xuICB9XG5cbiAgcHVibGljIHNldCBlbGVtZW50cyhlbGVtZW50czogSFRNTEVsZW1lbnRbXSkge1xuICAgIGlmICghQXJyYXkuaXNBcnJheShlbGVtZW50cykpIHtcbiAgICAgIGVsZW1lbnRzID0gW2VsZW1lbnRzXTtcbiAgICB9XG5cbiAgICBmb3IgKGNvbnN0IGVsIG9mIGVsZW1lbnRzKSB7XG4gICAgICB0aGlzLl9lbGVtZW50cy5wdXNoKGVsKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFkZE5vZGVSZW1vdmVMaXN0ZW5lcigpIHtcbiAgICBpZiAoL15bXntdK3tcXHMrfSQvZ20udGVzdCh0aGlzLmRlc3Ryb3kudG9TdHJpbmcoKSkpIHJldHVybjtcblxuICAgIG9uTm9kZVJlbW92ZSh0aGlzLmVsZW1lbnRzWzBdLCAoKSA9PiB7XG4gICAgICBpZiAoIXRoaXMuX3NraXBVbm1vdXQpIHtcbiAgICAgICAgdGhpcy5kZXN0cm95KCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICAvL0B0cy1pZ25vcmVcbiAgcHJpdmF0ZSBfbW91bnQoKSB7XG4gICAgdGhpcy5hZGROb2RlUmVtb3ZlTGlzdGVuZXIoKTtcbiAgICB0aGlzLm1vdW50KCk7XG4gIH1cblxuICBwcml2YXRlIF9kZXN0b3J5KCkge1xuICAgIGlmICh0aGlzLl9oYXNVbm1vdW50ZWQpIHJldHVybjtcbiAgICB0aGlzLmRlc3Ryb3koKTtcbiAgICB0aGlzLl9oYXNVbm1vdW50ZWQgPSB0cnVlO1xuICB9XG5cbiAgcHVibGljIHVwZGF0ZSh1cGRhdGU/OiBhbnkpIHtcbiAgICB0aGlzLl9za2lwVW5tb3V0ID0gdHJ1ZTtcblxuICAgIGNvbnN0IG9sZEVsZW1lbnRzID0gWy4uLnRoaXMuZWxlbWVudHNdO1xuXG4gICAgdGhpcy5fZWxlbWVudHMgPSBbXTtcblxuICAgIGxldCBlbCA9IHRoaXMucmVuZGVyKHVwZGF0ZSk7XG4gICAgZWwgPSByZW5kZXJFbGVtZW50KGVsKTtcbiAgICB0aGlzLmVsZW1lbnRzID0gZWwgYXMgdW5rbm93biBhcyBIVE1MRWxlbWVudFtdO1xuXG4gICAgY29uc3QgcGFyZW50ID0gb2xkRWxlbWVudHNbMF0ucGFyZW50RWxlbWVudCBhcyBIVE1MRWxlbWVudDtcblxuICAgIGlmICghcGFyZW50KVxuICAgICAgY29uc29sZS53YXJuKFwiQ29tcG9uZW50IG5lZWRzIGEgcGFyZW50IGVsZW1lbnQgdG8gZ2V0IHVwZGF0ZWQhXCIpO1xuXG4gICAgZm9yIChjb25zdCBjaGlsZCBvZiB0aGlzLmVsZW1lbnRzKSB7XG4gICAgICBwYXJlbnQuaW5zZXJ0QmVmb3JlKGNoaWxkLCBvbGRFbGVtZW50c1swXSk7XG4gICAgfVxuXG4gICAgZm9yIChsZXQgY2hpbGQgb2Ygb2xkRWxlbWVudHMpIHtcbiAgICAgIGNoaWxkLnJlbW92ZSgpO1xuICAgICAgLy9AdHMtaWdub3JlXG4gICAgICBjaGlsZCA9IG51bGw7XG4gICAgfVxuXG4gICAgdGhpcy5hZGROb2RlUmVtb3ZlTGlzdGVuZXIoKTtcblxuICAgIC8vQHRzLWlnbm9yZVxuICAgIG5leHRUaWNrKCgpID0+IHtcbiAgICAgIHRoaXMuX3NraXBVbm1vdXQgPSBmYWxzZTtcbiAgICAgIGlmICghdGhpcy5lbGVtZW50c1swXS5pc0Nvbm5lY3RlZCkge1xuICAgICAgICB0aGlzLl9kZXN0b3J5KCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn1cbiIsImV4cG9ydCBmdW5jdGlvbiBjcmVhdGVDb250ZXh0KGN0eDogYW55KSB7XG4gIGxldCBfY3R4ID0gY3R4O1xuICByZXR1cm4ge1xuICAgIFByb3ZpZGVyKHByb3BzOiBhbnkpIHtcbiAgICAgIGlmIChwcm9wcy52YWx1ZSkge1xuICAgICAgICBfY3R4ID0gcHJvcHMudmFsdWU7XG4gICAgICAgIHJldHVybiBwcm9wcy5jaGlsZHJlbjtcbiAgICAgIH1cbiAgICB9LFxuICAgIENvbnN1bWVyKHByb3BzOiBhbnkpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGNvbXBvbmVudDogcHJvcHMuY2hpbGRyZW5bMF0oX2N0eCksXG4gICAgICAgIHByb3BzOiB7XG4gICAgICAgICAgLi4ucHJvcHMsXG4gICAgICAgICAgY29udGV4dDogX2N0eCxcbiAgICAgICAgfSxcbiAgICAgIH07XG4gICAgfSxcbiAgICBnZXQoKSB7XG4gICAgICByZXR1cm4gX2N0eDtcbiAgICB9LFxuICAgIHNldChjdHg6IGFueSkge1xuICAgICAgX2N0eCA9IGN0eDtcbiAgICB9LFxuICB9O1xufVxuIiwiZXhwb3J0IGNvbnN0IEZyYWdtZW50ID0gKHByb3BzOiBhbnkpID0+IHtcbiAgcmV0dXJuIHByb3BzLmNoaWxkcmVuO1xufTtcbiIsImltcG9ydCB7IGlzRXZlbnQgfSBmcm9tIFwiLi4vdXRpbHNcIjtcbmltcG9ydCB7IGFwcGVuZENoaWxkcmVuLCBoTlMgfSBmcm9tIFwiLlwiO1xuXG5leHBvcnQgZnVuY3Rpb24gaChjb21wOiBhbnksIHByb3BzOiBhbnksIC4uLmNoaWxkcmVuOiBhbnlbXSk6IGFueSB7XG4gIGlmICh0eXBlb2YgY29tcCAhPT0gXCJzdHJpbmdcIikge1xuICAgIHJldHVybiB7IGNvbXBvbmVudDogY29tcCwgcHJvcHM6IHsgLi4ucHJvcHMsIGNoaWxkcmVuOiBjaGlsZHJlbiB9IH07XG4gIH1cblxuICBsZXQgcmVmO1xuXG4gIGNvbnN0IGVsZW1lbnQgPVxuICAgIGNvbXAgPT09IFwic3ZnXCJcbiAgICAgID8gKGhOUyhcInN2Z1wiKSBhcyBTVkdFbGVtZW50KVxuICAgICAgOiAoZG9jdW1lbnQuY3JlYXRlRWxlbWVudChjb21wKSBhcyBIVE1MRWxlbWVudCk7XG5cbiAgZm9yIChjb25zdCBwIGluIHByb3BzKSB7XG4gICAgaWYgKHAgPT09IFwic3R5bGVcIiAmJiB0eXBlb2YgcHJvcHNbcF0gPT09IFwib2JqZWN0XCIpIHtcbiAgICAgIGNvbnN0IHN0eWxlcyA9IE9iamVjdC5rZXlzKHByb3BzW3BdKVxuICAgICAgICAubWFwKChrKSA9PiBgJHtrfToke3Byb3BzW3BdW2tdfWApXG4gICAgICAgIC5qb2luKFwiO1wiKVxuICAgICAgICAucmVwbGFjZSgvW0EtWl0vZywgKG1hdGNoKSA9PiBgLSR7bWF0Y2gudG9Mb3dlckNhc2UoKX1gKTtcbiAgICAgIHByb3BzW3BdID0gc3R5bGVzICsgXCI7XCI7XG4gICAgfVxuXG4gICAgaWYgKHAgPT09IFwicmVmXCIpIHtcbiAgICAgIHJlZiA9IHByb3BzW3BdO1xuICAgIH1cblxuICAgIGlmIChpc0V2ZW50KGVsZW1lbnQsIHAudG9Mb3dlckNhc2UoKSkpIHtcbiAgICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihwLnRvTG93ZXJDYXNlKCkuc3Vic3RyaW5nKDIpLCAoZTogRXZlbnQpID0+XG4gICAgICAgIHByb3BzW3BdKGUpLFxuICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUocCwgcHJvcHNbcF0pO1xuICAgIH1cbiAgfVxuICBhcHBlbmRDaGlsZHJlbihlbGVtZW50IGFzIGFueSwgY2hpbGRyZW4pO1xuXG4gIGlmIChyZWYpIHtcbiAgICByZWYoZWxlbWVudCk7XG4gIH1cbiAgLy8gQHRzLWlnbm9yZVxuICBpZiAoZWxlbWVudC5zc3IpIHJldHVybiBlbGVtZW50LnNzcjtcbiAgcmV0dXJuIGVsZW1lbnQ7XG59XG4iLCJpbXBvcnQgeyByZW5kZXIgfSBmcm9tIFwiLlwiO1xuXG5leHBvcnQgZnVuY3Rpb24gaHlkcmF0ZShcbiAgY29tcG9uZW50OiBhbnksXG4gIHBhcmVudDogSFRNTEVsZW1lbnQgfCBudWxsID0gbnVsbCxcbiAgcmVtb3ZlQ2hpbGROb2RlcyA9IHRydWUsXG4pIHtcbiAgcmV0dXJuIHJlbmRlcihjb21wb25lbnQsIHBhcmVudCwgcmVtb3ZlQ2hpbGROb2Rlcyk7XG59XG4iLCJleHBvcnQgeyBhcHBlbmRDaGlsZHJlbiB9IGZyb20gXCIuL2FwcGVuZENoaWxkcmVuXCI7XG5leHBvcnQgeyBoIH0gZnJvbSBcIi4vaFwiO1xuZXhwb3J0IHsgcmVuZGVyIH0gZnJvbSBcIi4vcmVuZGVyXCI7XG5leHBvcnQgeyByZW5kZXJFbGVtZW50LCBoTlMgfSBmcm9tIFwiLi9yZW5kZXJFbGVtZW50XCI7XG5leHBvcnQgeyBoeWRyYXRlIH0gZnJvbSBcIi4vaHlkcmF0ZVwiO1xuZXhwb3J0IHsgQ29tcG9uZW50IH0gZnJvbSBcIi4vY29tcG9uZW50XCI7XG5leHBvcnQgeyBGcmFnbWVudCB9IGZyb20gXCIuL2ZyYWdtZW50XCI7XG5leHBvcnQgeyBjcmVhdGVDb250ZXh0IH0gZnJvbSBcIi4vY29udGV4dFwiO1xuZXhwb3J0IHsgX3N0YXRlLCBfY2xlYXJTdGF0ZSB9IGZyb20gXCIuL3N0YXRlXCI7XG5leHBvcnQgeyBsYXp5SHlkcmF0aW9uIH0gZnJvbSBcIi4vbGF6eUh5ZHJhdGlvblwiO1xuZXhwb3J0IHsgd2l0aFN0eWxlcyB9IGZyb20gXCIuL3dpdGhTdHlsZXNcIjtcbmV4cG9ydCB7IFN0b3JlIH0gZnJvbSBcIi4vc3RvcmVcIjtcbiIsImltcG9ydCB7IFZpc2libGUgfSBmcm9tIFwiLi4vY29tcG9uZW50c1wiO1xuaW1wb3J0IHsgaCwgaHlkcmF0ZSB9IGZyb20gXCIuXCI7XG5cbmV4cG9ydCBmdW5jdGlvbiBsYXp5SHlkcmF0aW9uKFxuICBjb21wb25lbnQ6IGFueSxcbiAgcGFyZW50OiBhbnksXG4gIHJlbW92ZUNoaWxkTm9kZXMgPSB0cnVlLFxuKSB7XG4gIGNvbnN0IGNtcCA9IGgoVmlzaWJsZSwgbnVsbCwgY29tcG9uZW50KTtcbiAgcmV0dXJuIGh5ZHJhdGUoY21wLCBwYXJlbnQsIHJlbW92ZUNoaWxkTm9kZXMpO1xufVxuIiwiaW1wb3J0IHsgYXBwZW5kQ2hpbGRyZW4sIHJlbmRlckVsZW1lbnQgfSBmcm9tIFwiLlwiO1xuXG5leHBvcnQgZnVuY3Rpb24gcmVuZGVyKFxuICBjbXA6IGFueSxcbiAgcGFyZW50OiBIVE1MRWxlbWVudCB8IGFueSA9IG51bGwsXG4gIHJlbW92ZUNoaWxkTm9kZXMgPSB0cnVlLFxuKSB7XG4gIGxldCBlbCA9IHJlbmRlckVsZW1lbnQoY21wKTtcblxuICBpZiAoQXJyYXkuaXNBcnJheShlbCkpIHtcbiAgICBlbCA9IGVsLm1hcCgoYykgPT4gcmVuZGVyRWxlbWVudChjKSk7XG4gICAgaWYgKGVsLmxlbmd0aCA9PT0gMSkge1xuICAgICAgZWwgPSBlbFswXTtcbiAgICB9XG4gIH1cblxuICBpZiAocGFyZW50KSB7XG4gICAgaWYgKHJlbW92ZUNoaWxkTm9kZXMpIHtcbiAgICAgIHJlbW92ZUFsbENoaWxkTm9kZXMocGFyZW50KTtcbiAgICB9XG5cbiAgICBpZiAoZWwgJiYgcGFyZW50LmlkICYmIHBhcmVudC5pZCA9PT0gZWwuaWQgJiYgcGFyZW50LnBhcmVudEVsZW1lbnQpIHtcbiAgICAgIHBhcmVudC5wYXJlbnRFbGVtZW50LnJlcGxhY2VDaGlsZChlbCwgcGFyZW50KTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKEFycmF5LmlzQXJyYXkoZWwpKSB7XG4gICAgICAgIGVsLm1hcCgoYykgPT4gYXBwZW5kQ2hpbGRyZW4ocGFyZW50LCByZW5kZXJFbGVtZW50KGMpKSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhcHBlbmRDaGlsZHJlbihwYXJlbnQsIHJlbmRlckVsZW1lbnQoZWwpKTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHBhcmVudC5zc3IpIHJldHVybiBwYXJlbnQuc3NyO1xuICAgIHJldHVybiBwYXJlbnQ7XG4gIH0gZWxzZSB7XG4gICAgaWYgKHR5cGVvZiBpc1NTUiA9PT0gXCJib29sZWFuXCIgJiYgaXNTU1IgJiYgIUFycmF5LmlzQXJyYXkoZWwpKSByZXR1cm4gW2VsXTtcbiAgICByZXR1cm4gZWw7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZUFsbENoaWxkTm9kZXMoZWw6IEhUTUxFbGVtZW50KSB7XG4gIHdoaWxlIChlbC5maXJzdENoaWxkKSB7XG4gICAgZWwucmVtb3ZlQ2hpbGQoZWwuZmlyc3RDaGlsZCk7XG4gIH1cbn1cbiIsImltcG9ydCB7IG5leHRUaWNrLCBzdHJUb0hhc2ggfSBmcm9tIFwiLi4vdXRpbHNcIjtcblxuZXhwb3J0IGZ1bmN0aW9uIHJlbmRlckVsZW1lbnQoY21wOiBhbnkpOiBhbnkge1xuICBpZiAoW1widW5kZWZpbmVkXCIgfHwgXCJvYmplY3RcIl0uaW5jbHVkZXModHlwZW9mIGNtcCkpIHtcbiAgICByZXR1cm4gW107XG4gIH1cbiAgaWYgKGNtcCA9PSBudWxsKSB7XG4gICAgcmV0dXJuIFtdO1xuICB9XG5cbiAgaWYgKHR5cGVvZiBjbXAgPT09IFwic3RyaW5nXCIpIHtcbiAgICByZXR1cm4gY21wO1xuICB9XG5cbiAgaWYgKHR5cGVvZiBjbXAgPT09IFwibnVtYmVyXCIpIHtcbiAgICByZXR1cm4gXCJcIiArIGNtcDtcbiAgfVxuXG4gIGlmIChjbXA/LnRhZ05hbWUgJiYgY21wLnRhZ05hbWUudG9Mb3dlckNhc2UoKSA9PT0gXCJzdmdcIikge1xuICAgIHJldHVybiBTVkcoeyBjaGlsZHJlbjogW2NtcF0gfSk7XG4gIH1cblxuICBpZiAoY21wPy50YWdOYW1lKSB7XG4gICAgcmV0dXJuIGNtcDtcbiAgfVxuXG4gIGlmIChcbiAgICBjbXAgJiZcbiAgICBjbXAuY29tcG9uZW50ICYmXG4gICAgY21wLmNvbXBvbmVudC5wcm90b3R5cGUgJiZcbiAgICBjbXAuY29tcG9uZW50LnByb3RvdHlwZS5jb25zdHJ1Y3RvciAmJlxuICAgIC9eY2xhc3NcXHMvLnRlc3QoRnVuY3Rpb24ucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoY21wLmNvbXBvbmVudCkpXG4gICkge1xuICAgIHJldHVybiByZW5kZXJDbGFzc0NvbXBvbmVudChjbXApO1xuICB9XG5cbiAgaWYgKGNtcC5jb21wb25lbnQgJiYgdHlwZW9mIGNtcC5jb21wb25lbnQgPT09IFwiZnVuY3Rpb25cIikge1xuICAgIHJldHVybiByZW5kZXJGdW5jdGlvbmFsQ29tcG9uZW50KGNtcCk7XG4gIH1cblxuICBpZiAoQXJyYXkuaXNBcnJheShjbXApKSB7XG4gICAgcmV0dXJuIGNtcC5tYXAoKGMpID0+IHJlbmRlckVsZW1lbnQoYykpLmZsYXQoKTtcbiAgfVxuXG4gIGlmICh0eXBlb2YgY21wID09PSBcImZ1bmN0aW9uXCIpIHJldHVybiByZW5kZXJFbGVtZW50KGNtcCgpKTtcblxuICBpZiAoY21wPy5jb21wb25lbnQ/LnRhZ05hbWUgJiYgdHlwZW9mIGNtcC5jb21wb25lbnQudGFnTmFtZSA9PT0gXCJzdHJpbmdcIilcbiAgICByZXR1cm4gcmVuZGVyRWxlbWVudChjbXAuY29tcG9uZW50KTtcblxuICBpZiAoQXJyYXkuaXNBcnJheShjbXAuY29tcG9uZW50KSkgcmV0dXJuIHJlbmRlckVsZW1lbnQoY21wLmNvbXBvbmVudCk7XG5cbiAgaWYgKGNtcC5jb21wb25lbnQpIHJldHVybiByZW5kZXJFbGVtZW50KGNtcC5jb21wb25lbnQpO1xufVxuXG5mdW5jdGlvbiByZW5kZXJGdW5jdGlvbmFsQ29tcG9uZW50KGNtcDogYW55KSB7XG4gIGNvbnN0IHsgY29tcG9uZW50LCBwcm9wcyB9ID0gY21wO1xuICBjb25zdCBlbCA9IGNvbXBvbmVudChwcm9wcyk7XG4gIHJldHVybiByZW5kZXJFbGVtZW50KGVsKTtcbn1cblxuZnVuY3Rpb24gcmVuZGVyQ2xhc3NDb21wb25lbnQoY21wOiBhbnkpIHtcbiAgY29uc3QgeyBjb21wb25lbnQsIHByb3BzIH0gPSBjbXA7XG5cbiAgY29uc3QgaGFzaCA9IHN0clRvSGFzaChjb21wb25lbnQudG9TdHJpbmcoKSk7XG5cbiAgY29tcG9uZW50LnByb3RvdHlwZS5fZ2V0SGFzaCA9ICgpID0+IGhhc2g7XG5cbiAgY29uc3QgQ29tcG9uZW50ID0gbmV3IGNvbXBvbmVudChwcm9wcyk7XG5cbiAgQ29tcG9uZW50LmJlZm9yZU1vdW50KCk7XG5cbiAgbGV0IGVsID0gQ29tcG9uZW50LnJlbmRlcigpO1xuICBlbCA9IHJlbmRlckVsZW1lbnQoZWwpO1xuXG4gIENvbXBvbmVudC5lbGVtZW50cyA9IGVsO1xuXG4gIGlmIChwcm9wcz8ucmVmKSBwcm9wcy5yZWYoQ29tcG9uZW50KTtcbiAgaWYgKHR5cGVvZiBpc1NTUiA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgIC8vQHRzLWlnbm9yZVxuICAgIG5leHRUaWNrKCgpID0+IHtcbiAgICAgIENvbXBvbmVudC5fbW91bnQoKTtcbiAgICB9KTtcbiAgfVxuICByZXR1cm4gZWw7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBoTlModGFnOiBzdHJpbmcpIHtcbiAgcmV0dXJuIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhcbiAgICBcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIsXG4gICAgdGFnLFxuICApIGFzIFNWR0VsZW1lbnQ7XG59XG5cbmZ1bmN0aW9uIFNWRyhwcm9wczogYW55KSB7XG4gIGNvbnN0IGNoaWxkID0gcHJvcHMuY2hpbGRyZW5bMF0gYXMgU1ZHRWxlbWVudDtcbiAgY29uc3QgYXR0cnMgPSBjaGlsZC5hdHRyaWJ1dGVzO1xuXG4gIGNvbnN0IHN2ZyA9IGhOUyhcInN2Z1wiKSBhcyBTVkdFbGVtZW50O1xuXG4gIGZvciAoY29uc3QgYXR0ciBvZiBhdHRycykge1xuICAgIHN2Zy5zZXRBdHRyaWJ1dGUoYXR0ci5uYW1lLCBhdHRyLnZhbHVlKTtcbiAgfVxuXG4gIHN2Zy5pbm5lckhUTUwgPSBjaGlsZC5pbm5lckhUTUw7XG5cbiAgcmV0dXJuIHN2Zztcbn1cbiIsImV4cG9ydCBjb25zdCBfc3RhdGUgPSBuZXcgTWFwKCk7XG5cbmV4cG9ydCBmdW5jdGlvbiBfY2xlYXJTdGF0ZSgpIHtcbiAgX3N0YXRlLmNsZWFyKCk7XG59XG4iLCJleHBvcnQgY2xhc3MgU3RvcmUge1xuICBwcml2YXRlIF9zdGF0ZTogYW55O1xuICBwcml2YXRlIF9wcmV2U3RhdGU6IGFueTtcbiAgcHJpdmF0ZSBfbGlzdGVuZXJzOiBNYXA8c3RyaW5nLCBGdW5jdGlvbj4gPSBuZXcgTWFwKCk7XG4gIHByaXZhdGUgX3N0b3JhZ2U6IFwibWVtb3J5XCIgfCBcImxvY2FsXCIgfCBcInNlc3Npb25cIjtcbiAgcHJpdmF0ZSBfaWQ6IHN0cmluZztcblxuICBjb25zdHJ1Y3RvcihcbiAgICBkZWZhdWx0U3RhdGU6IGFueSxcbiAgICBuYW1lOiBzdHJpbmcgPSBcIlwiLFxuICAgIHN0b3JhZ2U6IFwibWVtb3J5XCIgfCBcImxvY2FsXCIgfCBcInNlc3Npb25cIiA9IFwibWVtb3J5XCIsXG4gICkge1xuICAgIGlmIChpc1NTUikge1xuICAgICAgc3RvcmFnZSA9IFwibWVtb3J5XCI7XG4gICAgfVxuXG4gICAgdGhpcy5faWQgPSBuYW1lO1xuICAgIHRoaXMuX3N0b3JhZ2UgPSBzdG9yYWdlO1xuXG4gICAgdGhpcy5fc3RhdGUgPSB0aGlzLl9wcmV2U3RhdGUgPSBkZWZhdWx0U3RhdGU7XG5cbiAgICBpZiAoIXRoaXMuX3N0b3JhZ2UgfHwgdGhpcy5fc3RvcmFnZSA9PT0gXCJtZW1vcnlcIikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IFN0b3JhZ2UgPSBzdG9yYWdlID09PSBcImxvY2FsXCIgPyBsb2NhbFN0b3JhZ2UgOiBzZXNzaW9uU3RvcmFnZTtcblxuICAgIGNvbnN0IGl0ZW0gPSBTdG9yYWdlLmdldEl0ZW0odGhpcy5faWQpO1xuICAgIGlmIChpdGVtKSB7XG4gICAgICB0aGlzLl9zdGF0ZSA9IHRoaXMuX3ByZXZTdGF0ZSA9IEpTT04ucGFyc2UoaXRlbSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIFN0b3JhZ2Uuc2V0SXRlbSh0aGlzLl9pZCwgSlNPTi5zdHJpbmdpZnkoZGVmYXVsdFN0YXRlKSk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBwZXJzaXN0KHN0YXRlOiBhbnkpIHtcbiAgICBpZiAodGhpcy5fc3RvcmFnZSA9PT0gXCJtZW1vcnlcIikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBTdG9yYWdlID0gdGhpcy5fc3RvcmFnZSA9PT0gXCJsb2NhbFwiID8gbG9jYWxTdG9yYWdlIDogc2Vzc2lvblN0b3JhZ2U7XG4gICAgU3RvcmFnZS5zZXRJdGVtKHRoaXMuX2lkLCBKU09OLnN0cmluZ2lmeShzdGF0ZSkpO1xuICB9XG5cbiAgcHVibGljIGNsZWFyKCkge1xuICAgIHRoaXMuX3N0YXRlID0gdGhpcy5fcHJldlN0YXRlID0gdW5kZWZpbmVkO1xuICAgIGNvbnN0IFN0b3JhZ2UgPSB0aGlzLl9zdG9yYWdlID09PSBcImxvY2FsXCIgPyBsb2NhbFN0b3JhZ2UgOiBzZXNzaW9uU3RvcmFnZTtcbiAgICBTdG9yYWdlLnJlbW92ZUl0ZW0odGhpcy5faWQpO1xuICB9XG5cbiAgcHVibGljIHNldCBzdGF0ZShzdGF0ZTogYW55KSB7XG4gICAgdGhpcy5fcHJldlN0YXRlID0gdGhpcy5fc3RhdGU7XG4gICAgdGhpcy5fc3RhdGUgPSBzdGF0ZTtcblxuICAgIHRoaXMucGVyc2lzdChzdGF0ZSk7XG5cbiAgICB0aGlzLl9saXN0ZW5lcnMuZm9yRWFjaCgoZnVuYykgPT4ge1xuICAgICAgZnVuYyh0aGlzLl9zdGF0ZSwgdGhpcy5fcHJldlN0YXRlKTtcbiAgICB9KTtcbiAgfVxuXG4gIHB1YmxpYyBnZXQgc3RhdGUoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3N0YXRlO1xuICB9XG5cbiAgcHVibGljIHNldFN0YXRlKHN0YXRlOiBhbnkpIHtcbiAgICB0aGlzLnN0YXRlID0gc3RhdGU7XG4gIH1cblxuICBwdWJsaWMgdXNlKCkge1xuICAgIGNvbnN0IGlkID0gTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyKDIsIDkpO1xuICAgIGNvbnN0IF90aGlzID0gdGhpcztcbiAgICByZXR1cm4ge1xuICAgICAgZ2V0IHN0YXRlKCkge1xuICAgICAgICByZXR1cm4gX3RoaXMuc3RhdGU7XG4gICAgICB9LFxuICAgICAgc2V0U3RhdGUoc3RhdGU6IGFueSkge1xuICAgICAgICBfdGhpcy5zZXRTdGF0ZShzdGF0ZSk7XG4gICAgICB9LFxuICAgICAgc3Vic2NyaWJlKGZ1bmM6IChuZXdTdGF0ZTogYW55LCBwcmV2U3RhdGU6IGFueSkgPT4gdm9pZCkge1xuICAgICAgICBfdGhpcy5fbGlzdGVuZXJzLnNldChpZCwgZnVuYyk7XG4gICAgICB9LFxuICAgICAgY2FuY2VsKCkge1xuICAgICAgICBfdGhpcy5fbGlzdGVuZXJzLmRlbGV0ZShpZCk7XG4gICAgICB9LFxuICAgIH07XG4gIH1cbn1cbiIsImltcG9ydCB7IEhlbG1ldCB9IGZyb20gXCIuLi9jb21wb25lbnRzXCI7XG5pbXBvcnQgeyBDb21wb25lbnQsIGgsIEZyYWdtZW50IH0gZnJvbSBcIi5cIjtcblxuZXhwb3J0IGZ1bmN0aW9uIHdpdGhTdHlsZXMoc3R5bGVzOiBhbnkpOiBhbnkge1xuICByZXR1cm4gZnVuY3Rpb24gKFdyYXBwZWRDb21wb25lbnQ6IGFueSkge1xuICAgIHJldHVybiBjbGFzcyBleHRlbmRzIENvbXBvbmVudCB7XG4gICAgICByZW5kZXIoKSB7XG4gICAgICAgIGNvbnN0IHsgY2hpbGRyZW4sIC4uLnJlc3QgfSA9IHRoaXMucHJvcHM7XG5cbiAgICAgICAgY29uc3QgaGVsbWV0ID0gaChIZWxtZXQsIG51bGwsIGgoXCJzdHlsZVwiLCBudWxsLCBzdHlsZXMudG9TdHJpbmcoKSkpO1xuXG4gICAgICAgIGNvbnN0IGNvbXBvbmVudCA9IGNoaWxkcmVuLmxlbmd0aFxuICAgICAgICAgID8gaChXcmFwcGVkQ29tcG9uZW50LCB7IC4uLnJlc3QgfSwgY2hpbGRyZW4pXG4gICAgICAgICAgOiBoKFdyYXBwZWRDb21wb25lbnQsIHsgLi4udGhpcy5wcm9wcyB9KTtcblxuICAgICAgICByZXR1cm4gaChGcmFnbWVudCwgbnVsbCwgaGVsbWV0LCBjb21wb25lbnQpO1xuICAgICAgfVxuICAgIH07XG4gIH07XG59XG4iLCJleHBvcnQgeyBuZXh0VGljayB9IGZyb20gXCIuL3V0aWxzXCI7XG5leHBvcnQgeyByZW5kZXJUb1N0cmluZyB9IGZyb20gXCIuL3NzclwiO1xuZXhwb3J0IHtcbiAgaCxcbiAgcmVuZGVyLFxuICBoeWRyYXRlLFxuICBGcmFnbWVudCxcbiAgQ29tcG9uZW50LFxuICB3aXRoU3R5bGVzLFxuICBjcmVhdGVDb250ZXh0LFxuICBsYXp5SHlkcmF0aW9uLFxuICBTdG9yZSxcbn0gZnJvbSBcIi4vY29yZVwiO1xuZXhwb3J0IHtcbiAgU3VzcGVuc2UsXG4gIExpbmssXG4gIFN3aXRjaCxcbiAgUm91dGUsXG4gIFZpcmFMaW5rLFxuICBJbWcsXG4gIEhlbG1ldCxcbiAgVmlzaWJsZSxcbn0gZnJvbSBcIi4vY29tcG9uZW50c1wiO1xuXG5pbXBvcnQgeyBoLCByZW5kZXIsIGh5ZHJhdGUsIGxhenlIeWRyYXRpb24sIEZyYWdtZW50IH0gZnJvbSBcIi4vY29yZVwiO1xuaW1wb3J0IHsgcmVuZGVyVG9TdHJpbmcgfSBmcm9tIFwiLi9zc3JcIjtcbmV4cG9ydCBkZWZhdWx0IHtcbiAgcmVuZGVyLFxuICBoeWRyYXRlLFxuICBoLFxuICBsYXp5SHlkcmF0aW9uLFxuICByZW5kZXJUb1N0cmluZyxcbiAgRnJhZ21lbnQsXG59O1xuIiwiaW1wb3J0IHsgSFRNTEVsZW1lbnRTU1IgfSBmcm9tIFwiLlwiO1xuXG5leHBvcnQgY2xhc3MgRG9jdW1lbnRTU1Ige1xuICBib2R5OiBIVE1MRWxlbWVudFNTUjtcbiAgaGVhZDogSFRNTEVsZW1lbnRTU1I7XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5ib2R5ID0gdGhpcy5jcmVhdGVFbGVtZW50KFwiYm9keVwiKTtcbiAgICB0aGlzLmhlYWQgPSB0aGlzLmNyZWF0ZUVsZW1lbnQoXCJoZWFkXCIpO1xuICB9XG5cbiAgY3JlYXRlRWxlbWVudCh0YWc6IHN0cmluZykge1xuICAgIHJldHVybiBuZXcgSFRNTEVsZW1lbnRTU1IodGFnKTtcbiAgfVxuXG4gIGNyZWF0ZUVsZW1lbnROUyhfVVJJOiBzdHJpbmcsIHRhZzogc3RyaW5nKSB7XG4gICAgcmV0dXJuIG5ldyBIVE1MRWxlbWVudFNTUih0YWcpO1xuICB9XG5cbiAgY3JlYXRlVGV4dE5vZGUodGV4dDogc3RyaW5nKSB7XG4gICAgcmV0dXJuIHRleHQ7XG4gIH1cblxuICBxdWVyeVNlbGVjdG9yKF9xdWVyeTogYW55KSB7XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxufVxuIiwiZXhwb3J0IGNsYXNzIEhUTUxFbGVtZW50U1NSIHtcbiAgc3NyOiBzdHJpbmc7XG4gIHNlbGZDbG9zaW5nOiBib29sZWFuO1xuICB0YWdOYW1lOiBzdHJpbmc7XG5cbiAgY29uc3RydWN0b3IodGFnOiBzdHJpbmcpIHtcbiAgICB0aGlzLnRhZ05hbWUgPSB0YWc7XG4gICAgY29uc3Qgc2VsZkNsb3NpbmcgPSBbXG4gICAgICBcImFyZWFcIixcbiAgICAgIFwiYmFzZVwiLFxuICAgICAgXCJiclwiLFxuICAgICAgXCJjb2xcIixcbiAgICAgIFwiZW1iZWRcIixcbiAgICAgIFwiaHJcIixcbiAgICAgIFwiaW1nXCIsXG4gICAgICBcImlucHV0XCIsXG4gICAgICBcImxpbmtcIixcbiAgICAgIFwibWV0YVwiLFxuICAgICAgXCJwYXJhbVwiLFxuICAgICAgXCJzb3VyY2VcIixcbiAgICAgIFwidHJhY2tcIixcbiAgICAgIFwid2JyXCIsXG4gICAgXTtcblxuICAgIGlmIChzZWxmQ2xvc2luZy5pbmRleE9mKHRhZykgPj0gMCkge1xuICAgICAgdGhpcy5zc3IgPSBgPCR7dGFnfSAvPmA7XG4gICAgICB0aGlzLnNlbGZDbG9zaW5nID0gdHJ1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5zc3IgPSBgPCR7dGFnfT48LyR7dGFnfT5gO1xuICAgIH1cbiAgfVxuXG4gIGdldCBvdXRlckhUTUwoKSB7XG4gICAgcmV0dXJuIHRoaXMuaW5uZXJUZXh0O1xuICB9XG5cbiAgZ2V0IGlubmVySFRNTCgpIHtcbiAgICBjb25zdCByZWcgPSAvKF48W2Etel0rPikoW1xcc1xcU10qKSg8XFwvW2Etel0rPiQpL2dtO1xuICAgIHJldHVybiByZWcuZXhlYyh0aGlzLnNzcik/LlsyXSA/PyBcIlwiO1xuICB9XG5cbiAgZ2V0IGlubmVyVGV4dCgpIHtcbiAgICBjb25zdCByZWcgPSAvKF48W14+XSs+KSguKyk/KDxcXC9bYS16XSs+JHxcXC8+JCkvZ207XG4gICAgcmV0dXJuIHJlZy5leGVjKHRoaXMuc3NyKT8uWzJdID8/IFwiXCI7XG4gIH1cblxuICBzZXQgaW5uZXJUZXh0KHRleHQpIHtcbiAgICBjb25zdCByZWcgPSAvKF48W14+XSs+KSguKyk/KDxcXC9bYS16XSs+JHxcXC8+JCkvZ207XG4gICAgdGhpcy5zc3IgPSB0aGlzLnNzci5yZXBsYWNlKHJlZywgYCQxJHt0ZXh0fSQzYCk7XG4gIH1cblxuICBnZXQgYXR0cmlidXRlcygpIHtcbiAgICByZXR1cm4geyBsZW5ndGg6IDEgfTtcbiAgfVxuXG4gIGdldCBjaGlsZHJlbigpIHtcbiAgICBjb25zdCByZWcgPSAvPChbYS16XSspKCg/ITxcXC9cXDEpLikqPFxcL1xcMT4vZ21zO1xuXG4gICAgY29uc3QgYXJyYXkgPSBbXTtcblxuICAgIGxldCBtYXRjaDtcblxuICAgIHdoaWxlICgobWF0Y2ggPSByZWcuZXhlYyh0aGlzLmlubmVySFRNTCkpICE9PSBudWxsKSB7XG4gICAgICBhcnJheS5wdXNoKG1hdGNoWzBdLnJlcGxhY2UoL1tcXHNdKy9nbSwgXCIgXCIpKTtcbiAgICB9XG5cbiAgICByZXR1cm4gYXJyYXk7XG4gIH1cbiAgc2V0QXR0cmlidXRlTlMobmFtZTogc3RyaW5nLCB2YWx1ZTogYW55KSB7XG4gICAgdGhpcy5zZXRBdHRyaWJ1dGUobmFtZSwgdmFsdWUpO1xuICB9XG5cbiAgc2V0QXR0cmlidXRlKG5hbWU6IHN0cmluZywgdmFsdWU6IGFueSkge1xuICAgIGlmICh0aGlzLnNlbGZDbG9zaW5nKVxuICAgICAgdGhpcy5zc3IgPSB0aGlzLnNzci5yZXBsYWNlKFxuICAgICAgICAvKF48W2Etel0rICkoLispL2dtLFxuICAgICAgICBgJDEke25hbWV9PVwiJHt2YWx1ZX1cIiAkMmAsXG4gICAgICApO1xuICAgIGVsc2VcbiAgICAgIHRoaXMuc3NyID0gdGhpcy5zc3IucmVwbGFjZSgvKF48W14+XSspKC4rKS9nbSwgYCQxICR7bmFtZX09XCIke3ZhbHVlfVwiJDJgKTtcbiAgfVxuXG4gIGFwcGVuZENoaWxkKGNoaWxkOiBhbnkpIHtcbiAgICBjb25zdCBhcHBlbmQgPSBjaGlsZC5zc3IgPyBjaGlsZC5zc3IgOiBjaGlsZDtcblxuICAgIGNvbnN0IGluZGV4ID0gdGhpcy5zc3IubGFzdEluZGV4T2YoXCI8L1wiKTtcblxuICAgIHRoaXMuc3NyID1cbiAgICAgIHRoaXMuc3NyLnN1YnN0cmluZygwLCBpbmRleCkgKyBhcHBlbmQgKyB0aGlzLnNzci5zdWJzdHJpbmcoaW5kZXgpO1xuICB9XG5cbiAgcmVwbGFjZUNoaWxkKG5ld0NoaWxkOiBhbnksIF9vbGRDaGlsZD86IGFueSkge1xuICAgIHRoaXMuaW5uZXJUZXh0ID0gbmV3Q2hpbGQuc3NyO1xuICB9XG5cbiAgYWRkRXZlbnRMaXN0ZW5lcihfdHlwZTogYW55LCBfbGlzdGVuZXI6IGFueSwgX29wdGlvbnM/OiBhbnkpIHt9XG59XG4iLCJleHBvcnQgeyByZW5kZXJUb1N0cmluZyB9IGZyb20gXCIuL3JlbmRlclRvU3RyaW5nXCI7XG5leHBvcnQgeyBEb2N1bWVudFNTUiB9IGZyb20gXCIuL2RvY3VtZW50XCI7XG5leHBvcnQgeyBIVE1MRWxlbWVudFNTUiB9IGZyb20gXCIuL2VsZW1lbnRzXCI7XG4iLCJpbXBvcnQgeyBEb2N1bWVudFNTUiB9IGZyb20gXCIuXCI7XG5pbXBvcnQgeyByZW5kZXIsIF9zdGF0ZSB9IGZyb20gXCIuLi9jb3JlXCI7XG5pbXBvcnQgeyBkZXRlY3RTU1IgfSBmcm9tIFwiLi4vdXRpbHNcIjtcblxuZ2xvYmFsVGhpcy5pc1NTUiA9IGRldGVjdFNTUigpID09PSB0cnVlID8gdHJ1ZSA6IHVuZGVmaW5lZDtcbmdsb2JhbFRoaXMuX25hbm8gPSB7IGlzU1NSLCBsb2NhdGlvbjogeyBwYXRobmFtZTogXCIvXCIgfSB9O1xuXG5leHBvcnQgZnVuY3Rpb24gaW5pdFNTUihwYXRobmFtZTogc3RyaW5nID0gXCIvXCIpIHtcbiAgX25hbm8ubG9jYXRpb24gPSB7IHBhdGhuYW1lIH07XG4gIC8vIEB0cy1pZ25vcmVcbiAgZ2xvYmFsVGhpcy5kb2N1bWVudCA9IGlzU1NSID8gbmV3IERvY3VtZW50U1NSKCkgOiB3aW5kb3cuZG9jdW1lbnQ7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiByZW5kZXJUb1N0cmluZyhcbiAgY29tcG9uZW50OiBhbnksXG4gIG9wdGlvbnM6IHsgcGF0aG5hbWU/OiBzdHJpbmc7IGNsZWFyU3RhdGU/OiBib29sZWFuIH0gPSB7fSxcbikge1xuICBjb25zdCB7IHBhdGhuYW1lLCBjbGVhclN0YXRlID0gdHJ1ZSB9ID0gb3B0aW9ucztcblxuICBpbml0U1NSKHBhdGhuYW1lKTtcbiAgaWYgKGNsZWFyU3RhdGUpIF9zdGF0ZS5jbGVhcigpO1xuXG4gIHJldHVybiByZW5kZXIoY29tcG9uZW50LCBudWxsLCB0cnVlKS5qb2luKFwiXCIpIGFzIHN0cmluZztcbn1cbiIsImltcG9ydCB7IGggfSBmcm9tIFwiLlwiO1xuXG5leHBvcnQgY29uc3QgbmV4dFRpY2sgPVxuICB0eXBlb2YgUHJvbWlzZSA9PT0gXCJmdW5jdGlvblwiXG4gICAgPyBQcm9taXNlLnByb3RvdHlwZS50aGVuLmJpbmQoUHJvbWlzZS5yZXNvbHZlKCkpXG4gICAgOiBzZXRUaW1lb3V0O1xuXG5leHBvcnQgZnVuY3Rpb24gaXNFdmVudChlbDogYW55LCBwcm9wOiBzdHJpbmcpIHtcbiAgaWYgKHByb3AuaW5kZXhPZihcIm9uXCIpICE9PSAwKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGlmIChlbC5zc3IpIHJldHVybiB0cnVlO1xuICByZXR1cm4gW1wiZnVuY3Rpb25cIiwgXCJvYmplY3RcIl0uaW5jbHVkZXModHlwZW9mIGVsW3Byb3BdKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRldGVjdFNTUigpIHtcbiAgcmV0dXJuIChcbiAgICAvL0B0cy1pZ25vcmVcbiAgICB0eXBlb2YgRGVubyAhPT0gXCJ1bmRlZmluZWRcIiB8fCB0eXBlb2Ygd2luZG93ID09PSBcInVuZGVmaW5lZFwiIC8qICYmIGlzU1NSICovXG4gICk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzdHJUb0hhc2goc3RyOiBzdHJpbmcpIHtcbiAgbGV0IGhhc2ggPSAwO1xuXG4gIGlmICghc3RyLmxlbmd0aCkgcmV0dXJuIGhhc2g7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgaSsrKSB7XG4gICAgY29uc3QgY2hhciA9IHN0ci5jaGFyQ29kZUF0KGkpO1xuICAgIGhhc2ggPSAoaGFzaCA8PCA1KSAtIGhhc2ggKyBjaGFyO1xuICAgIGhhc2ggfD0gMDtcbiAgfVxuICByZXR1cm4gTWF0aC5hYnMoaGFzaCkudG9TdHJpbmcoMzIpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNEZXNjZW5kYW50KGRlc2NlbmRhbnQ6IGFueSwgcm9vdDogYW55KTogYm9vbGVhbiB7XG4gIHJldHVybiAoXG4gICAgZGVzY2VuZGFudCAmJlxuICAgIChkZXNjZW5kYW50ID09PSByb290IHx8IGlzRGVzY2VuZGFudChkZXNjZW5kYW50LnBhcmVudE5vZGUsIHJvb3QpKVxuICApO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gb25Ob2RlUmVtb3ZlKGVsOiBIVE1MRWxlbWVudCwgY2FsbGJhY2s6ICgpID0+IGFueSkge1xuICBsZXQgb2JzZXJ2ZXIgPSBuZXcgTXV0YXRpb25PYnNlcnZlcigobXV0TGlzdCkgPT4ge1xuICAgIGZvciAoY29uc3QgbXV0IG9mIG11dExpc3QpIHtcbiAgICAgIG11dC5yZW1vdmVkTm9kZXMuZm9yRWFjaCgocmVtb3ZlZE5vZGUpID0+IHtcbiAgICAgICAgaWYgKGlzRGVzY2VuZGFudChlbCwgcmVtb3ZlZE5vZGUpKSB7XG4gICAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgICAgICBpZiAob2JzZXJ2ZXIpIHtcbiAgICAgICAgICAgIG9ic2VydmVyLmRpc2Nvbm5lY3QoKTtcbiAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgICAgIG9ic2VydmVyID0gdW5kZWZpbmVkO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9KTtcbiAgb2JzZXJ2ZXIub2JzZXJ2ZShkb2N1bWVudCwge1xuICAgIGNoaWxkTGlzdDogdHJ1ZSxcbiAgICBzdWJ0cmVlOiB0cnVlLFxuICB9KTtcbiAgcmV0dXJuIG9ic2VydmVyO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdGFzayhmdW5jOiAoKSA9PiB2b2lkKSB7XG4gIHJldHVybiBzZXRUaW1lb3V0KGZ1bmMsIDApO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gbm9kZVRvU3RyaW5nKG5vZGU6IGFueSkge1xuICBjb25zdCB0ZW1wID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xuICB0ZW1wLmFwcGVuZENoaWxkKG5vZGUuY2xvbmVOb2RlKHRydWUpKTtcbiAgcmV0dXJuIHRlbXAudG9TdHJpbmcoKTtcbn1cblxuZXhwb3J0IGNvbnN0IGFkZFN0eWxlc1RvSGVhZCA9IChzdHlsZXM6IHN0cmluZywgaGFzaDogc3RyaW5nKSA9PiB7XG4gIGNvbnN0IGVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgW2RhdGEtY3NzLWhhc2gqPVwiJHtoYXNofVwiXWApO1xuICBpZiAoIWVsKSB7XG4gICAgY29uc3Qgc3R5bGVFbGVtZW50ID0gaChcInN0eWxlXCIsIHsgXCJkYXRhLWNzcy1oYXNoXCI6IGhhc2ggfSwgc3R5bGVzKTtcbiAgICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHN0eWxlRWxlbWVudCk7XG4gIH1cbn07XG4iLCIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHR2YXIgY2FjaGVkTW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXTtcblx0aWYgKGNhY2hlZE1vZHVsZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0cmV0dXJuIGNhY2hlZE1vZHVsZS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdC8vIG5vIG1vZHVsZS5pZCBuZWVkZWRcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuIiwiaW1wb3J0IHtcbiAgU3VzcGVuc2UsXG4gIExpbmssXG4gIFN3aXRjaCxcbiAgUm91dGUsXG4gIFZpcmFMaW5rLFxuICBJbWcsXG4gIEhlbG1ldCxcbiAgVmlzaWJsZSxcbiAgaCxcbiAgbmV4dFRpY2ssXG4gIHJlbmRlcixcbiAgaHlkcmF0ZSxcbiAgcmVuZGVyVG9TdHJpbmcsXG4gIEZyYWdtZW50LFxuICBDb21wb25lbnQsXG4gIHdpdGhTdHlsZXMsXG4gIGNyZWF0ZUNvbnRleHQsXG4gIGxhenlIeWRyYXRpb24sXG4gIFN0b3JlLFxufSBmcm9tIFwiLi5cIjtcblxuZXhwb3J0IGRlZmF1bHQge1xuICBTdXNwZW5zZSxcbiAgTGluayxcbiAgU3dpdGNoLFxuICBSb3V0ZSxcbiAgVmlyYUxpbmssXG4gIEltZyxcbiAgSGVsbWV0LFxuICBWaXNpYmxlLFxuICBoLFxuICBuZXh0VGljayxcbiAgcmVuZGVyLFxuICBoeWRyYXRlLFxuICByZW5kZXJUb1N0cmluZyxcbiAgRnJhZ21lbnQsXG4gIENvbXBvbmVudCxcbiAgd2l0aFN0eWxlcyxcbiAgY3JlYXRlQ29udGV4dCxcbiAgbGF6eUh5ZHJhdGlvbixcbiAgU3RvcmUsXG59O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9